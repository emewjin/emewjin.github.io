---
title: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ - íŒ¬í…€ íƒ€ì…ì´ë€ ë¬´ì—‡ì¸ê°€
description: í•˜ìŠ¤ì¼ˆê³¼ ê°™ì€ ì–¸ì–´ì—ì„œëŠ” íŒ¬í…€ íƒ€ì…ì´ë¼ëŠ” ê²ƒì´ ìˆëŠ”ë°, ì´ê²Œ ë¬´ì—‡ì´ê³  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì–´ë–»ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì
date: 2023-02-10
lastUpdated: 2023-02-10
tags: [Typescript]
---

ì–´ëŠë§ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•œì§€ 1ë…„ì´ ë„˜ì–´ê°€ë©´ì„œ ë‹¨ìˆœíˆ ìë™ì™„ì„±ì— ìš°ì™€ í•˜ë˜ ë•Œë¥¼ ì§€ë‚˜ ì¢€ ë” ì•ˆì „í•œ ì½”ë“œë¥¼ ìœ„í•´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ í™œìš©ì„ ê³ ë¯¼í•˜ê²Œ ë˜ì—ˆë‹¤.  
ìµœê·¼ì—ë„ ì‹œê°„ ê°’ì„ ì•ˆì „í•˜ê²Œ ë‹¤ë£¨ê¸° ìœ„í•œ ê³ ë¯¼ì„ í•˜ê³  ìˆì—ˆëŠ”ë°, [ê°™ì´ ì¼í•˜ëŠ” ë¶„](https://wiki.lucashan.space/)ê»˜ì„œ **íŒ¬í…€ íƒ€ì…**ì´ë¼ëŠ” ìƒˆë¡œìš´ ê°œë…ì„ ì•Œë ¤ì£¼ì…¨ë‹¤.

## ë°œë‹¨

ëª¨ë“  í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¥¼ ëŒ€ë³€í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ ì ì–´ë„ ìš°ë¦¬ íŒ€ì›ë“¤ì˜ ì˜ê²¬ì„ ë¬¼ì–´ë³´ì•˜ì„ ë•Œ, ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™•ì¸í–ˆì„ ë•Œ ì‹œê°„ ê°’ì˜ ê¸°ë³¸ ë‹¨ìœ„ë¥¼ msë¡œ ìƒê°í•˜ëŠ” ê²ƒì´ ì—¬ëŸ¬ëª¨ë¡œ ì ì ˆí–ˆë‹¤.  
í•˜ì§€ë§Œ íšŒì‚¬ì—ì„œ ë°±ì—”ë“œ ê°œë°œìì™€ api ëª…ì„¸ë¥¼ ë…¼ì˜í•˜ë‹¤ë³´ë©´ ì—¬ëŸ¬ê°€ì§€ì˜ ì´ìœ ë¡œ í”„ë¡ íŠ¸ì—”ë“œì— ì „ë‹¬ë˜ëŠ” ì‹œê°„ ê°’ë“¤ì˜ ë‹¨ìœ„ê°€ í•˜ë‚˜ë¡œ í†µì¼ë˜ì§€ ì•Šì„ ë•Œê°€ ìˆë‹¤. api ì‘ë‹µê°’ìœ¼ë¡œë¶€í„° ì–»ëŠ” ì‹œê°„ ê°’ì€ ê·¸ ë‹¨ìœ„ê°€ ë¶„ì´ê¸°ë„ í•˜ê³ , ì´ˆì´ê¸°ë„ í•˜ê³ , msì¼ ë•Œë„ ìˆê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.

- ì„œë¡œ ë‹¨ìœ„ê°€ ë‹¤ë¥¸ ìƒíƒœì—ì„œ ê³„ì‚°
- ì´ ê°’ì´ ë¬´ìŠ¨ ë‹¨ìœ„ì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ
- ì‘ì—…í•˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì˜ ì‹¬ë¦¬ì  ë¶ˆì•ˆí•¨

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë°±ì—”ë“œì—ì„œ ë¬´ìŠ¨ ê°’ì„ ë„˜ê²¨ì£¼ë“  í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ìš°ì„  msë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ê¸°ë¡œ í•©ì˜í–ˆë‹¤.  
ì´ì— ë”°ë¼ msë¡œ ë³€í™˜ì‹œì¼œì£¼ëŠ” DTOê°€ í•„ìš”í–ˆê³ , ì½”ë“œì—ì„œ jsdocê³¼ ê°™ì€ ì£¼ì„ì—†ì´ë„ msë‹¨ìœ„ì„ì„ ë“œëŸ¬ë‚´ì¤„ ìˆ˜ ìˆëŠ” ë°©ë²•ë„ í•„ìš”í–ˆë‹¤.  
íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•˜ê³  ìˆìœ¼ë‹ˆ ê°€ì¥ ë°”ëŒì§í•œ ë°©ë²•ì€ íƒ€ì…ì„ ê°•í•˜ê²Œ ì‚¬ìš©í•˜ì—¬ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¡ëŠ” ê²ƒì¼í…Œë‹¤.

## íŒ¬í…€ íƒ€ì…ì´ë€?

ê·¸ë˜ì„œ ë§Œë‚˜ê²Œ ëœ **íŒ¬í…€ íƒ€ì… (Phantom Type)** ì´ë€ ìœ ë ¹ íƒ€ì…ì´ë¼ê³ ë„ ë¶ˆë¦¬ëŠ”ë°, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì •ì‹ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ìŠ¤í™ì€ ì•„ë‹Œë“¯ í•˜ë‹¤.  
êµ¬ê¸€ë§í•´ë³´ë©´ í•˜ìŠ¤ì¼ˆ, rust, swiftë“± ë‹¤ë¥¸ ì–¸ì–´ì— ì¡´ì¬í•œë‹¤. ê·¸ì¤‘ì—ì„œë„ ëŒ€í‘œì ìœ¼ë¡œ í•˜ìŠ¤ì¼ˆ ìœ„í‚¤ë¥¼ ë³´ì.

> "A phantom type is a parametrised type whose parameters do not all appear on the right-hand side of its definition..."
>
> [Haskell Wiki, PhantomType](https://wiki.haskell.org/Phantom_type)

ëª¨ë“  íƒ€ì… ë§¤ê°œë³€ìˆ˜ê°€ íƒ€ì… ì •ì˜ì˜ **ì™¼ìª½ì—ë§Œ** ì¡´ì¬í•˜ëŠ” ê²ƒì„ íŒ¬í…€ íƒ€ì…ì´ë¼ê³  ë¶€ë¥¸ë‹¤ê³  í•œë‹¤.  
ì´ë ‡ê²Œë§Œ ì½ì—ˆì„ ë•ŒëŠ” ë­”ì†Œë¦°ì§€ ëª¨ë¥´ê² ì—ˆëŠ”ë° íŒ€ì›ì´ ì‘ì„±í•˜ì‹  ì•„í‹°í´ê³¼ êµ¬ê¸€ë§ì„ í†µí•´ ë°œê²¬í•œ ê¸€ì„ ë³´ê³ , **"ê°’ì€ ê·¸ëŒ€ë¡œì´ì§€ë§Œ íŠ¹ì • íƒ€ì…ìœ¼ë¡œ ë³€í™”ì‹œí‚¤ëŠ” ê²ƒ"** ì´ë¼ê³  ì¡°ê¸ˆì´ë‚˜ë§ˆ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤.

- [ìŠê¸° ì „ì— ì •ë¦¬í•œ ìœ ë ¹ íƒ€ì…](https://wiki.lucashan.space/programming/phantom-type/)
- [Notes on TypeScript: Phantom Types](https://dev.to/busypeoples/notes-on-typescript-phantom-types-kg9)

ì´ í¬ìŠ¤íŠ¸ì—ì„œëŠ” íŒ€ì›ë“¤ì—ê²Œ ë³´ì—¬ì£¼ë ¤ê³  ë‘ ë²ˆì§¸ ì˜ë¬¸ ì•„í‹°í´ì„ ì˜ì—­í–ˆë˜ ë‚´ìš©ì„ ë‹´ìœ¼ë ¤ê³  í•œë‹¤.

## Notes on TypeScript: Phantom Types

> ì´ ê¸€ì€ 19ë…„ì— ì‘ì„±ëœ [Notes on TypeScript: Phantom Types](https://dev.to/busypeoples/notes-on-typescript-phantom-types-kg9)ë¥¼ ì˜ì—­í•œ ë¬¸ì„œë¡œ ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ê¸€ ìˆœì„œ ë³€ê²½, ì½”ë“œ ì˜ˆì œ ë³€ê²½ ë“± ì›ë¬¸ê³¼ ë‹¤ë¥¸ ì ì´ ìˆìŠµë‹ˆë‹¤. ì˜ëª» ë²ˆì—­ëœ ë¶€ë¶„ì´ ìˆë‹¤ë©´ í¸í•˜ê²Œ ì•Œë ¤ì£¼ì„¸ìš”! ğŸ¤—
>
> ê¸€ì˜ ì €ìëŠ” íŒ¬í…€ íƒ€ì…ì„ ë” ì˜ ì´í•´í•˜ê¸° ìœ„í•´, íŒ¬í…€ íƒ€ì…ì´ ì–´ë–»ê²Œ ì“°ì¼ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ê°„ë‹¨í•œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì œì™€ í•¨ê»˜ ì´ ê¸€ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

### ì†Œê°œ

ì´ ë…¸íŠ¸ëŠ” TypeScriptë¥¼ ë” ì˜ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë  ê²ƒì´ë©°, íŠ¹ì • ìƒí™©ì—ì„œ TypeScriptë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì°¾ì•„ì•¼ í•  ë•Œ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì˜ˆì œëŠ” TypeScript 3.2ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.

### íŒ¬í…€ íƒ€ì…

íŒ¬í…€ íƒ€ì…ì„ ë” ì˜ ì´í•´í•˜ê¸° ìœ„í•´, íŒ¬í…€ íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ê²½ìš°ì— ìœ ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ì˜ˆì œë¥¼ ê¸¸ê²Œ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.

> "A phantom type is a parametrised type whose parameters do not all appear on the right-hand side of its definition..."
>
> [Haskell Wiki, PhantomType](https://wiki.haskell.org/Phantom_type)

ìœ„ì˜ í•˜ìŠ¤ì¼ˆ ìœ„í‚¤ ì •ì˜ë¥¼ ì‚´í´ë³´ë©´ íŒ¬í…€ íƒ€ì…ì€ ëª¨ë“  íŒŒë¼ë¯¸í„°ê°€ ì •ì˜ì˜ ì˜¤ë¥¸ìª½ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°í™”ëœ íƒ€ì…ì´ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ìŠ·í•œ ì˜ˆì œë¥¼ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤.

```ts
type FormData<A> = string;
```

`FormData`ëŠ” A ë§¤ê°œë³€ìˆ˜ê°€ ì™¼ìª½ì—ë§Œ í‘œì‹œë˜ë¯€ë¡œ íŒ¬í…€ íƒ€ì…ì…ë‹ˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ ìš°ë¦¬ê°€ ì§€ê¸ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ê³  ìˆê³ , ë¼ì´ë¸ŒëŸ¬ë¦¬ ìœ ì €ê°€ `FormData` íƒ€ì…ì˜ ê°’ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ë³´ê² ìŠµë‹ˆë‹¤.  
ì´ë•Œ ì›í•˜ëŠ” ê²ƒì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ íŠ¹ì • ë¶€ë¶„ì—ì„œ (ì˜ˆë¥¼ ë“¤ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” í•¨ìˆ˜ì˜ ì¸ì) íƒ€ì…ì„ ì œí•œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.  
ì˜ˆë¥¼ë“¤ì–´, Validated í¼ ë°ì´í„°ì™€ Unvalidated í¼ ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ê³  ì‹¶ì€ ìƒí™©ì´ë¼ê³  ìƒê°í•´ë´…ì‹œë‹¤.

> ì—­: ìµœì¢…ì ìœ¼ë¡œ êµ¬í˜„í•  ë‚´ìš©ì„ ë¨¼ì € ë³´ì•˜ì„ ë•Œ ê¸€ì´ ë” ì˜ ì´í•´ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `makeFormData`í•¨ìˆ˜ë¥¼ í†µí•´ ìƒì„±ëœ ê°’ë§Œì„ ë‹¤ë¥¸ í•¨ìˆ˜ì—ì„œ ì“¸ ìˆ˜ ìˆê²Œ í•˜ê³ ì‹¶ì€ ìƒí™©ì…ë‹ˆë‹¤.

```ts
import { makeFormData, validate, upperCase, process } from './phantomTypes';

const initialData = makeFormData('test'); // Unvalidated
const validatedData = validate(initialData); // Validated

// validate("hello") // Type '"hello"' is not assignable to type '{value: never}'
// validate({value: "hello"}) // Type 'string' is not assignable to type 'never'

if (validatedData !== null) {
  // validate(validatedData); // Error! Type '"Validated"' is not assignable to Type '"Unvalidated"'
  upperCase(initialData);
  // upperCase(validatedData) // Error! Type '"Validated"' is not assignable to Type '"Unvalidated"'
  process(validatedData);
  // process(initialData); // Error! Type '"Unvalidated"' is not assignable to Type '"Validated"'
}
```

ì´ëŸ° ë™ì‘ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´, ìš°ì„  Validated ì™€ Unvalidated ë‘ ê°€ì§€ íƒ€ì…ì„ ë§Œë“œëŠ” ê²ƒì—ì„œ ì‹œì‘í•©ì‹œë‹¤.

```ts
type Unvalidated = {\_type: "Unvalidated"};
type Validated = {\_type: "Validated"};
```

ë‹¤ìŒìœ¼ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìœ ì €ë“¤ì´ `value`ì˜ íƒ€ì… ì •ì˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•  ìˆ˜ ì—†ë„ë¡ `FormData` íƒ€ì…ì„ êµ¬í˜„í•©ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ `value`ë¥¼ `never`ë¡œ ì •ì˜í•©ë‹ˆë‹¤.

```ts
type FormData<T, D = never> = { value: never } & T;
```

ì´ì œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” í•¨ìˆ˜ë“¤ì˜ íƒ€ì…ì„ ë¨¼ì € ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. stringì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê³ , unvalidated `FormData` ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ `makeFormData`ì˜ íƒ€ì…ì„ ì„ ì–¸í•  ê²ƒì…ë‹ˆë‹¤.

```ts
type makeFormData = (a: string) => FormData<Unvalidated>;
```

unvalidated `FormData` ë¥¼ ë°›ì•„ ë˜‘ê°™ì´ unvalidated `FormData`ë¥¼ ë¦¬í„´í•˜ëŠ” `upperCase`í•¨ìˆ˜ì˜ íƒ€ì…ë„ ì‘ì„±í•©ë‹ˆë‹¤.

```ts
type upperCase = (a: FormData<Unvalidated>) => FormData<Unvalidated>;
```

ë‹¤ìŒìœ¼ë¡œ unvalidated `FormData`ë¥¼ ë°›ì•„ validated input ë˜ëŠ” nullì„ ë¦¬í„´í•˜ëŠ” `validate`í•¨ìˆ˜ íƒ€ì…ì„ ì‘ì„±í•©ë‹ˆë‹¤.

```ts
type Validate = (a: FormData<Unvalidated>) => FormData<Validated> | null;
```

ë§ˆì§€ë§‰ìœ¼ë¡œ validated dataë¥¼ ì²˜ë¦¬í•˜ëŠ” `process`í•¨ìˆ˜ íƒ€ì…ì„ ì‘ì„±í•©ë‹ˆë‹¤.

```ts
type Process = (a: FormData<Validated>) => FormData<Validated>;
```

ì´ë ‡ê²Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•  helper functionë“¤ì— ëŒ€í•œ íƒ€ì… ì •ì˜ê°€ ëë‚¬ìŠµë‹ˆë‹¤. ì´ì œ ì´ íƒ€ì… ì •ì˜ë¥¼ ë”°ë¼, ì‹¤ì œ formì˜ ê°’ì´ í•­ìƒ ê°œë°œìë¡œë¶€í„° ìˆ¨ê²¨ì§€ë„ë¡ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```ts
type FormData<T, D = never> = { value: never } & T;
type makeFormData = (a: string) => FormData<Unvalidated>;

export const makeFormData: MakeFormData = (value) => {
  return { value } as FormData<Unvalidated>;
};
```

makeFormData í•¨ìˆ˜ê°€ ë¬¸ìì—´ì„ ë°›ì•„ë“¤ì´ê³  FormData<Unvalidated>ë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ì ì„ ìƒê¸°í•˜ë©´, ì´ ìœ í˜•ì„ ìƒì„±í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ ì´ê²ƒë¿ì´ë¼ëŠ” ì ì— ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ìœ í˜•ì€ ì ˆëŒ€ ìœ í˜•ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê°œë°œìê°€ ê°’ì„ ì •ì˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ì´ ìœ í˜•ì´ ìƒì„±ë˜ë©´ ê°œë°œìëŠ” ë°˜í™˜ëœ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ê°’ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê±°ë‚˜ ëŒ€ë¬¸ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`makeFormData`í•¨ìˆ˜ë¥¼ í†µí•´ ë¬¸ìì—´ì„ ë°›ì•„ `FormData<Unvalidated>` ë¥¼ ë¦¬í„´í•˜ëŠ” ê²ƒì€ ê³§ `FormData<Unvalidated>` íƒ€ì…ì˜ ê°’ì„ ë§Œë“œëŠ” ìœ ì¼í•œ ë°©ë²•ì…ë‹ˆë‹¤.

> ì—­: `FormData<Unvalidated>` íƒ€ì…ì„ inputìœ¼ë¡œ ìš”êµ¬í•˜ëŠ” í•¨ìˆ˜ëŠ” ëª¨ë‘ `makeFormData`ë¥¼ í†µí•´ ìƒì„±í•œ ê°’ë§Œì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

valueì— ëŒ€í•œ íƒ€ì…ì„ `never`ë¡œ ì •ì˜í•´ë‘ì—ˆê¸° ë•Œë¬¸ì—, ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ìœ ì €ëŠ” valueì˜ íƒ€ì…ì„ ì¬ì •ì˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ì¼ë‹¨ ì´ íƒ€ì…ì´ ìƒì„±ë˜ê³ ë‚˜ë©´, ê°œë°œìë“¤ì€ ë¦¬í„´ëœ ê°’ì„ `upperCase` í•¨ìˆ˜ë‚˜ `validate` í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì—­: `FormData<Unvalidated>`ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ êµ¬í˜„ëœ í•¨ìˆ˜ëŠ” ë‘˜ ë¿ì´ê¸° ë•Œë¬¸

`upperCase`í•¨ìˆ˜ì™€ `validate`í•¨ìˆ˜ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ì‚´í´ë´…ì‹œë‹¤.

```ts
type upperCase = (a: FormData<Unvalidated>) => FormData<Unvalidated>;
export const upperCase: UpperCase = (data) => {
  const internalData = data as InternalUnvalidated;
  return { value: internalData.value.toUpperCase() } as FormData<Unvalidated>;
};

type Validate = (a: FormData<Unvalidated>) => FormData<Validated> | null;
export const validate: Validate = (data) => {
  const internalData = data as InternalUnvalidated;
  if (internalData.value.length > 3) {
    return { value: internalData.value } as FormData<Validated>;
  }
  return null;
};
```

í•œ ê°€ì§€ ì¤‘ìš”í•œ ë¶€ë¶„ì„ ì°¾ì„ ìˆ˜ ìˆì„ ê²ƒì¸ë°, ë°”ë¡œ ì¸ìë¡œ ë°›ì€ ê°’ì„ ë‚´ë¶€ì ìœ¼ë¡œ ìºìŠ¤íŒ…í•´ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ê·¸ëŸ°ë° `InternalUnvalidated`ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?

```ts
type InternalUnvalidated = Unvalidated & {
  value: string;
};

type InternalValidated = Validated & {
  value: string;
};
```

ì´ ì½”ë“œì—ì„œ ìš°ë¦¬ê°€ í•œ ì¼ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°œë°œìì—ê²ŒëŠ” ìˆ¨ê²¨ì§„ ë°ì´í„°ì˜ ë‚´ë¶€ í‘œí˜„ì„ ì •ì˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ ì¼€ì´ìŠ¤ì—ì„œ ê°’ì´ ë¬¸ìì—´ì´ë¼ê³  ê°€ì •í•  ê²ƒì…ë‹ˆë‹¤.

`process`í•¨ìˆ˜ë„ ì§€ê¸ˆê¹Œì§€ ë³´ì•˜ë˜ í•¨ìˆ˜ë“¤ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ í•œ ê°€ì§€ ë‹¤ë¥¸ ì ì€ ë‚´ë¶€ì—ì„œ ì¸ìë¡œ ë°›ì€ ê°’ì„ `InternalValidated`ìœ¼ë¡œ ìºìŠ¤íŒ…í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ í•¨ìˆ˜ëŠ” `FormData<Validated>` íƒ€ì…ì„ ë¦¬í„´í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

```ts
type Process = (a: FormData<Validated>) => FormData<Validated>;

export const process: Process = (data: FormData<Validated>) => {
  const internalData = data as InternalValidated;
  // do some processing...
  return data; // cast to FormData<Validated>
};
```

ì—¬ê¸°ê¹Œì§€ ìš°ë¦¬ëŠ” íŒ¬í…€ íƒ€ì…ì„ êµ¬í˜„í•´ì„œ, íŒ¬í…€ íƒ€ì…ì„ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìš°ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ë™ì‘í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
import { makeFormData, validate, upperCase, process } from './phantomTypes';

const initialData = makeFormData('test'); // Unvalidated
const validatedData = validate(initialData); // Validated

// validate("hello") // Type '"hello"' is not assignable to type '{value: never}'
// validate({value: "hello"}) // Type 'string' is not assignable to type 'never'

if (validatedData !== null) {
  // validate(validatedData); // Error! Type '"Validated"' is not assignable to Type '"Unvalidated"'
  upperCase(initialData);
  // upperCase(validatedData) // Error! Type '"Validated"' is not assignable to Type '"Unvalidated"'
  process(validatedData);
  // process(initialData); // Error! Type '"Unvalidated"' is not assignable to Type '"Validated"'
}
```

ì´ì œ ì§€ê¸ˆê¹Œì§€ êµ¬í˜„í•œ ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ Phantom Typeì„ ì¶”ìƒí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type PhantomType<Type, Data> = {\_type: Type} & Data;

// use this type helper to create an UnvalidatedData type
type UnvalidatedData = PhantomType<"Unvalidated", {value: string}>
```

ì´ì¯¤ ë˜ë©´ ì´ì œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íŒ¬í…€ íƒ€ì…ì„ ì–´ë–»ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ ê¸°ë³¸ì ìœ¼ë¡œ ì´í•´í–ˆì„ ê²ƒì…ë‹ˆë‹¤. ì „ì²´ ì˜ˆì œëŠ” [ì—¬ê¸° -íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ-](<https://www.typescriptlang.org/play#src=type%20FormData_%3CT%2C%20D%20%3D%20never%3E%20%3D%20%7B%20value%3A%20never%20%7D%20%26%20T%3B%0D%0A%0D%0Atype%20Unvalidated%20%3D%20%7B_type%3A%20%22Unvalidated%22%7D%3B%0D%0Atype%20Validated%20%3D%20%7B%20_type%3A%20%22Validated%22%20%7D%3B%0D%0A%0D%0Atype%20MakeFormData%20%3D%20(a%3A%20string)%20%3D%3E%20FormData_%3CUnvalidated%3E%3B%0D%0Atype%20UpperCase%20%3D%20(a%3A%20FormData_%3CUnvalidated%3E)%20%3D%3E%20FormData_%3CUnvalidated%3E%3B%0D%0Atype%20Validate%20%3D%20(a%3A%20FormData_%3CUnvalidated%3E)%20%3D%3E%20FormData_%3CValidated%3E%20%7C%C2%A0null%3B%0D%0Atype%20Process%20%3D%20(a%3A%20FormData_%3CValidated%3E)%20%3D%3E%20FormData_%3CValidated%3E%3B%0D%0A%0D%0Atype%20InternalUnvalidated%20%3D%20Unvalidated%20%26%20%7B%0D%0A%20%20value%3A%20string%3B%0D%0A%7D%3B%0D%0A%0D%0Atype%20InternalValidated%20%3D%20Validated%20%26%20%7B%0D%0A%20%20value%3A%20string%3B%0D%0A%7D%3B%0D%0A%0D%0Aconst%20makeFormData%3A%20MakeFormData%20%3D%20value%20%3D%3E%20%7B%0D%0A%20%20return%20%7B%20value%20%7D%20as%20FormData_%3CUnvalidated%3E%3B%0D%0A%7D%3B%0D%0A%0D%0Aconst%20upperCase%3A%20UpperCase%20%3D%20data%20%3D%3E%20%7B%0D%0A%20%20const%20internalData%20%3D%20data%20as%20InternalUnvalidated%3B%0D%0A%20%20return%20%7B%20value%3A%20internalData.value.toUpperCase()%20%7D%20as%20FormData_%3CUnvalidated%3E%3B%0D%0A%7D%3B%0D%0A%0D%0Aconst%20validate%3A%20Validate%20%3D%20data%20%3D%3E%20%7B%0D%0A%20%20const%20internalData%20%3D%20data%20as%20InternalUnvalidated%3B%0D%0A%20%20if%20(internalData.value.length%20%3E%203)%20%7B%0D%0A%20%20%20%20return%20%7B%20value%3A%20internalData.value%20%7D%20as%20FormData_%3CValidated%3E%3B%0D%0A%20%20%7D%0D%0A%20%20return%20null%3B%0D%0A%7D%3B%0D%0A%0D%0Aconst%20process%20%3A%20Process%20%3D%20(data%3A%20FormData_%3CValidated%3E)%20%3D%3E%20%7B%0D%0A%20%20const%20internalData%20%3D%20data%20as%20InternalValidated%3B%0D%0A%20%20internalData.value.toLowerCase()%3B%0D%0A%20%20%2F%2F%20do%20some%20processing...%0D%0A%20%20return%20data%3B%0D%0A%7D%0D%0A%0D%0Aconst%20initialData%20%3D%20makeFormData(%22test%22)%3B%0D%0Aconst%20validatedData%20%3D%20validate(initialData)%3B%0D%0A%0D%0A%0D%0A%2F%2F%20validate(%22hello%22)%20%2F%2F%20Type%20'%22hello%22'%20is%20not%20assignable%20to%20type%20'%7Bvalue%3A%20never%7D'%0D%0A%2F%2F%20validate(%7Bvalue%3A%20%22hello%22%7D)%20%2F%2F%20Type%20'string'%20is%20not%20assignable%20to%20type%20'never'%0D%0A%0D%0Aconst%20upperCasedValue%20%3D%20upperCase(initialData)%3B%0D%0A%0D%0A%20%20%2F%2F%20process(initialData)%3B%20%2F%2F%20Error!%20Type%20'%22Unvalidated%22'%20is%20not%20assignable%20to%20Type%20'%22Validated%22'%0D%0A%0D%0Aif%20(validatedData%20!%3D%3D%20null)%20%7B%0D%0A%20%20%2F%2F%20validate(validatedData)%3B%20%2F%2F%20Error!%20Type%20'%22Validated%22'%20is%20not%20assignable%20to%20Type%20'%22Unvalidated%22'%20%20%0D%0A%20%20%2F%2F%20upperCase(validatedData)%20%2F%2F%20Error!%20Type%20'%22Validated%22'%20is%20not%20assignable%20to%20Type%20'%22Unvalidated%22'%0D%0A%20%20process(validatedData)%3B%0D%0A%7D%0D%0A>)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.
