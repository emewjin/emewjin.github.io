{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/ssr-performance-showdown/","result":{"data":{"site":{"siteMetadata":{"title":"emewjin.log","siteUrl":"https://emewjin.github.io"}},"markdownRemark":{"id":"b8559a29-c1ce-50de-98f6-44bc809a8611","tableOfContents":"<ul>\n<li><a href=\"#%EC%9D%BC%EA%B4%80%EC%84%B1-%EB%B3%B4%EC%9E%A5\">일관성 보장</a></li>\n<li><a href=\"#fastify-html\">fastify-html</a></li>\n<li><a href=\"#vue\">Vue</a></li>\n<li><a href=\"#svelte\">Svelte</a></li>\n<li><a href=\"#solid\">Solid</a></li>\n<li><a href=\"#preact\">Preact</a></li>\n<li><a href=\"#react\">React</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></li>\n</ul>","excerpt":"원문 : An SSR Performance Showdown 💡 노트: 첫 번째 버전의 벤치마크에서 몇 가지 실수가 있었으며, 이는 Theo Browne의 이 트윗에 요약되어 있습니다. 먼저 이러한 오류에 대해 사과드리며, Rich Harris, Ryan Carniato, Dan…","html":"<blockquote>\n<p>원문 : <a href=\"https://blog.platformatic.dev/ssr-performance-showdown\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">An SSR Performance Showdown</a></p>\n</blockquote>\n<blockquote>\n<p>💡 <strong>노트</strong>: 첫 번째 버전의 벤치마크에서 몇 가지 실수가 있었으며, 이는 <a href=\"https://x.com/t3dotgg/status/1828641333894095358\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Theo Browne의 이 트윗</a>에 요약되어 있습니다. 먼저 이러한 오류에 대해 사과드리며, <a href=\"https://github.com/Rich-Harris\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Rich Harris</a>, <a href=\"https://github.com/ryansolid\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ryan Carniato</a>, <a href=\"https://github.com/gaearon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dan Abramov</a>, <a href=\"https://github.com/zsilbi\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Balázs Németh</a>, <a href=\"https://x.com/trueadm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dominic Gannaway</a>의 수정에 대해 진심으로 감사의 말씀을 전합니다. 또한 Preact 버전에 기여해주신 <a href=\"https://github.com/JoviDeCroock\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jovi De Croock</a>에게도 감사를 표합니다.</p>\n</blockquote>\n<p>서버 사이드 렌더링(SSR)은 Node.js로 고성능 웹 애플리케이션을 구축할 때 종종 간과되는 측면입니다.</p>\n<p>컨설팅을 하면서 Node.js 성능 문제를 디버깅하는 데 중점을 두는 경우가 많았습니다. 이러한 상황에서 문제의 원인은 거의 항상 SSR이었습니다. SSR은 CPU에 큰 부담을 주는 작업으로, Node.js의 이벤트 루프를 차단하는 주요 원인이 될 수 있습니다. 따라서 프런트엔드 스택을 선택할 때 이 점을 반드시 고려해야 합니다.</p>\n<p>저희는 오늘날 가장 인기 있는 라이브러리에서 SSR 성능이 어떤 상태인지 알아보기로 했습니다. 특히 Fastify와 깔끔하게 통합할 수 있는 라이브러리를 집중적으로 살펴보았습니다.</p>\n<p>이를 위해 많은 요소를 포함한 복잡한 샘플 문서를 생성하여 테스트 페이지를 매우 크게 만들고, 각 라이브러리의 성능을 정확하게 측정할 수 있는 충분한 실행 시간을 확보해야 했습니다.</p>\n<p>그래서 LLM에게 10x10px 타일로 된 div를 사용하여 컨테이너에 나선형을 그리는 코드를 작성해 달라고 요청했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'wrapper'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span> <span class=\"token number\">960</span>\n<span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span> <span class=\"token number\">720</span>\n<span class=\"token keyword\">const</span> cellSize <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">drawSpiral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> centerX <span class=\"token operator\">=</span> width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">let</span> centerY <span class=\"token operator\">=</span> height <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">let</span> angle <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">const</span> step <span class=\"token operator\">=</span> cellSize\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>radius <span class=\"token operator\">&lt;</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> centerX <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> radius\n    <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> centerY <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> radius\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> x <span class=\"token operator\">&lt;=</span> width <span class=\"token operator\">-</span> cellSize <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&lt;=</span> height <span class=\"token operator\">-</span> cellSize<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span>\n      tile<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'tile'</span>\n      tile<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>left <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span>\n      tile<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>top <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span>\n      wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    angle <span class=\"token operator\">+=</span> <span class=\"token number\">0.2</span>\n    radius <span class=\"token operator\">+=</span> step <span class=\"token operator\">*</span> <span class=\"token number\">0.015</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">drawSpiral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<p>이후, 테스트하려는 모든 라이브러리를 사용한 버전을 생성하도록 요청했으며, 원래 예제의 DOM 메서드에 의존하지 않고 각 라이브러리의 렌더링 엔진을 사용하도록 구현을 수정했습니다.</p>\n<p>다음은 <strong>2398</strong>개의 <code class=\"language-text\">&lt;div></code> 요소를 포함한 샘플 문서의 모습입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39d1c5c9a7a27291590acdcc67c7d2a2/29007/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADBklEQVQ4y5WTz0sbQRTH59Re2n+h0P4HSlGQYpsWFHIQb+LBmyCKICie1L14EUHdlQRRIYoQNTFZTWI2KAkmoCDoRvHnmib1FyGIIpho1GR3vmWGKFZroQ++vGHmvc++N2+HKIryTtM081Pt7++b9/b2zIlEwpxMJs2np6dcqVTKfHh4+Hj+PE9RlPfEZrOVpdNp5HI53N3dcd3f3yOfzyOTySCRSGB7e5srFovh8vKSxz6NZ2sWOzY29oUMDAx8u729BQAdgAGAMh0dHdFIJEL9fj/1+XzU4/FwHwqFqKZpVNd1WohlOToDi6L4nUiS9DWbzTKgQQu2s7PDQbIsU4fDQe12O5fT6eR7s7OzdHV1leZyuUcoK2pwcND0B5AdJpNJ+Hw+zM3NYWJiAhaLBb29vejr6+Nrm80Gt9sNRVGgaRr+Cry5ueHAfD5PV1ZW4PF4OEwURbS2tqKmpgb19fVoa2tDT08PxsfHIcsygsEg0uk0B7KiXgCvrq7owsICZmZmMDw8jK6uLlRXV6OoqAhlZWWoqKhAc3MzS4TD4cD8/DxOTk5eB6ZSKcpacTqdvL2WlhaYTCYUFxdzMXBdXR36+/sxOTnJO4nFYq8Dz8/PaSAQ4F9nwIaGBpSUlHAQU3l5OZqamiBJEqampuD1enFwcPA6MJPJ0MXFRX4/o6OjEAQBtbW1qKysRGlpKaqqqtDR0QGr1QqXy8UHc3Z29hL4dMqqqvIps5ZYYnd3N9rb29HY2IjOzk4+bXbG/oJIJIJsNvtv4MXFBVjb7H5YIqt0aGiIw0dGRmC32/lZYSAvfxtRFB9a1nVdZ1Dj+PjY8Pv9htfrNVwulzE9Pc3ldrsNWZaNQCBg7O7usodgMAOQZ0VJkmQiFovFxN7ic7u+vsbGxgaWl5cRDoextLTEPdtjXTw39vatVusPIgjC5/X19UQ0Go1Ho9GfzKuqGt/c3OQ+HA7HQ6EQ98FgML62thbf2tqKP8QVcn6qqvpLEIQSQgh5Qwj5QAj5RAj5WPD/o4ccxnj7G8TUq+JFHXmNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/39d1c5c9a7a27291590acdcc67c7d2a2/8c557/1.png\"\n        srcset=\"/static/39d1c5c9a7a27291590acdcc67c7d2a2/4edbd/1.png 175w,\n/static/39d1c5c9a7a27291590acdcc67c7d2a2/13ae7/1.png 350w,\n/static/39d1c5c9a7a27291590acdcc67c7d2a2/8c557/1.png 700w,\n/static/39d1c5c9a7a27291590acdcc67c7d2a2/e996b/1.png 1050w,\n/static/39d1c5c9a7a27291590acdcc67c7d2a2/2cefc/1.png 1400w,\n/static/39d1c5c9a7a27291590acdcc67c7d2a2/29007/1.png 1600w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://github.com/fastify/fastify-vite\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fastify의 Vite 통합 설정</a>은 다양한 프레임워크의 SSR 성능을 조사하기 위한 완벽한 테스트 환경을 제공합니다.</p>\n<p>이 글에서는 SSR을 수행하는 데 필요한 최소한의 보일러 플레이트를 살펴보고 5가지 주요 프런트엔드 라이브러리의(<a href=\"https://react.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React</a>, <a href=\"https://vuejs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vue</a>, <a href=\"https://www.solidjs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Solid</a>, <a href=\"https://svelte.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Svelte</a>, <a href=\"https://preactjs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Preact</a>) 성능을 비교해 보았습니다. 또한 더 간단한 대안으로 <a href=\"https://github.com/mcollina/fastify-html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">fastify-html</a>(<a href=\"https://github.com/gurgunday/ghtml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ghtml</a>을 Fastify로 랩핑한 버전) 및 <a href=\"https://www.npmjs.com/package/@fastify/view\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@fastify/view</a>를 통한 <a href=\"https://npmjs.com/package/ejs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ejs</a>도 살펴봤습니다.</p>\n<p>우리는 <a href=\"http://next.js/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Next.js</a>, <a href=\"https://astro.build/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Astro</a>, <a href=\"https://qwik.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Qwik</a> 와 같은 도구들, 그리고 다른 완전한 프레임워크들을 고려하지 않기로 했습니다. 그 이유는 이들이 독립적인 렌더링 메서드를 제공하지 않기 때문입니다.</p>\n<p><a href=\"https://fastify-vite.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@fastify/vite</a> 기반 테스트의 경우 다음과 같은 보일러 플레이트를 사용했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> Fastify <span class=\"token keyword\">from</span> <span class=\"token string\">'fastify'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> FastifyVite <span class=\"token keyword\">from</span> <span class=\"token string\">'@fastify/vite'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token function\">Fastify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>FastifyVite <span class=\"token comment\">/* options */</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span>vite<span class=\"token punctuation\">.</span><span class=\"token function\">ready</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>모든 테스트는 프로덕션 빌드, 즉 <code class=\"language-text\">vite build</code>를 실행한 후에 실행되었습니다.</p>\n<p>예외가 있다면 Vite가 필요하지 않은 <strong>fastify-html</strong> 및 <strong>ejs</strong> 테스트입니다.</p>\n<p>모든 예제가 포함된 <a href=\"https://github.com/platformatic/ssr-performance-showdown\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">저장소</a>를 확인하세요.</p>\n<h2 id=\"일관성-보장\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EA%B4%80%EC%84%B1-%EB%B3%B4%EC%9E%A5\" aria-label=\"일관성 보장 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일관성 보장</h2>\n<p>모든 예시가 동일한 특성을 공유하도록 했습니다.</p>\n<ul>\n<li>\n<p>클라이언트 측 반응성 기능을 사용하지 않습니다.</p>\n</li>\n<li>\n<p>React 및 Solid의 경우처럼 해당 프레임워크에 부적절한 경우를 제외하고 모든 스타일 바인딩은 템플릿 리터럴을 사용하여 수행됩니다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">x</code> 및 <code class=\"language-text\">y</code> 값은 <code class=\"language-text\">toFixed(2)</code>로 만들어집니다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">&lt;style></code> 태그는 document 셀에만 존재합니다.</p>\n</li>\n</ul>\n<p>테스트는 2020년형 맥북 에어 M1, 8GB RAM, 맥OS 벤츄라에서의 노드 v22에서 실행되었습니다.</p>\n<h2 id=\"fastify-html\" style=\"position:relative;\"><a href=\"#fastify-html\" aria-label=\"fastify html permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>fastify-html</h2>\n<p>이상값(outlier)부터 시작하겠습니다. <a href=\"https://github.com/gurgunday/ghtml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ghtml</a>를 래핑하는 Fastify 플러그인 <a href=\"https://github.com/mcollina/fastify-html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">fastify-html</a>는 초당 1088개의 요청을 전달합니다. 앞서 언급했듯이 이 설정은 특별한 구문이나 변환이 필요하지 않으므로 Vite가 필요하지 않다는 점에서 다른 모든 설정과 다릅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fe9efa8d86f1c364d0a101fe6a1d6302/5dded/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwUlEQVQY002Pu67EIAxEA35hIEqXImWKvf//hXNlI1ZbRLaOZw7KUc1QSwGrooiAiUDuqMzg3hF3FkFxzwy1hlJrsjoGKHLu3+5RVFEjEMI4hrA1VCJwayDVJQxxCOOxyDOjui+h2RIy4/j7fDDPE0SE3ntCd4eIQFVxzrl2kZzdHXPOvPWdE8lOCu/7xnVdGQgYs7nDzFapd6gZWmvJ9hdl++G7e7zvi+d5EsTLMccYKTLTZFHaLPb9B7EH290Q/wMzG2x87DMOBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/fe9efa8d86f1c364d0a101fe6a1d6302/8c557/2.png\"\n        srcset=\"/static/fe9efa8d86f1c364d0a101fe6a1d6302/4edbd/2.png 175w,\n/static/fe9efa8d86f1c364d0a101fe6a1d6302/13ae7/2.png 350w,\n/static/fe9efa8d86f1c364d0a101fe6a1d6302/8c557/2.png 700w,\n/static/fe9efa8d86f1c364d0a101fe6a1d6302/e996b/2.png 1050w,\n/static/fe9efa8d86f1c364d0a101fe6a1d6302/2cefc/2.png 1400w,\n/static/fe9efa8d86f1c364d0a101fe6a1d6302/5dded/2.png 1588w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>fastify-html이 이 테스트에 기준점으로 추가되었습니다. 이 라이브러리는 다른 라이브러리의 고급 기능이 없는 단순한 HTML 템플릿 라이브러리의 래퍼에 불과하기 때문에 다른 모든 라이브러리와 제대로 비교하기는 어렵습니다. 더 단순하기 때문에 이미 더 나은 성능을 발휘할 것으로 예상했고, 그저 다른 모든 기능을 갖춘 라이브러리들이 얼마나 뒤처지는지를 알아보고 싶었습니다.</p>\n<p>사용된 보일러 플레이트는 아래에서 확인할 수 있습니다. document 셸을 렌더링하는 레이아웃 함수를 등록하는 데 <code class=\"language-text\">createHtmlFunction</code>(@fastify/vite 모방)가 사용되는 것을 주목하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> Fastify <span class=\"token keyword\">from</span> <span class=\"token string\">'fastify'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> fastifyHtml <span class=\"token keyword\">from</span> <span class=\"token string\">'fastify-html'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createHtmlFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./client/index.js'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token function\">Fastify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>fastifyHtml<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addLayout</span><span class=\"token punctuation\">(</span><span class=\"token function\">createHtmlFunction</span><span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로, 구식 <a href=\"https://npmjs.com/package/ejs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">EJS</a>(<a href=\"https://www.npmjs.com/package/@fastify/view\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@fastify/view</a> 기반)를 사용한 테스트도 추가했습니다. <strong>초당 443개의 요청을 처리할 수 있었습니다.</strong></p>\n<h2 id=\"vue\" style=\"position:relative;\"><a href=\"#vue\" aria-label=\"vue permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vue</h2>\n<p>2위를 차지한 Vue는 <strong>초당 1028건의 요청을 처리하며</strong>, 뛰어난 SSR 성능과 완전한 라이브러리 생태계를 원하는 경우 최고의 선택일 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fc648388983619158f20f7a81d4eb77f/64639/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvUlEQVQY002Oyw6DMAwEQxLbecAFCSTaE+L/v3GrdUnLIYqZ9U4IuVZEEaQYkc0QU0IWQawVKWek3r93KYilfHfMkFNyNpGxf++HTMgChaqYhtAKEktDrIqoiqz2z8wwUX4/SBberxeu64KqotUKEfHTW0MIwVlrzfNaq5fn3p2ZKlTE/5bMheu6Yts2LMvipVIKzMxvfnMewmfGIzcbGR8Mx3HgPE/s++7LvXcPKeEC53mef+JnRsZsyDh/AIOxbPEXufctAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/fc648388983619158f20f7a81d4eb77f/8c557/3.png\"\n        srcset=\"/static/fc648388983619158f20f7a81d4eb77f/4edbd/3.png 175w,\n/static/fc648388983619158f20f7a81d4eb77f/13ae7/3.png 350w,\n/static/fc648388983619158f20f7a81d4eb77f/8c557/3.png 700w,\n/static/fc648388983619158f20f7a81d4eb77f/e996b/3.png 1050w,\n/static/fc648388983619158f20f7a81d4eb77f/2cefc/3.png 1400w,\n/static/fc648388983619158f20f7a81d4eb77f/64639/3.png 1568w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>동기식 서버 사이드 렌더링을 위해 사용된 Vue API는 <a href=\"https://vuejs.org/api/ssr#rendertostring\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">renderToString()</code></a>입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> renderToString <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue/server-renderer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>FastifyVite<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">createRenderFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      element<span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span><span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"svelte\" style=\"position:relative;\"><a href=\"#svelte\" aria-label=\"svelte permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Svelte</h2>\n<p>3위는 <strong>Svelte 5</strong>(아직 출시 전)로, <strong>초당 968건의 요청을 처리하여</strong> 매우 인상적인 성능을 보여주었습니다. 특히 풍부한 기능을 고려했을 때 더욱 놀라운 결과입니다.</p>\n<p>Svelte는 자체적인 non-JSX <a href=\"https://svelte.dev/docs/logic-blocks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">templating 구문</a>이 있으며 엔진이 매우 효율적이어서 성숙한 라이브러리 에코시스템을 갖춘 프레임워크가 필요하고 SSR 성능 저하를 원하지 않는 경우 탁월한 선택이 될 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75e0f596002800b6b0e8e280f574bd8b/2215f/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAw0lEQVQY0z1OS67EIAwDEhKgotLMouItK/X+V/ST004XUYh/OGlrKGaQUqDuKKrQWlFag6hCxoDUCjELTM1R3KEiwZVab587RARJ3JFEUXKGmiGL3IEUMLCPe5NjkHtsFngDybEUA//WwnVdcHf01lBVYWbovSHnjI0NRTB6h5sFv8+J1lroiXF4U58+3y+O48C+7xHEYA4FcdPYe7wDezhqflh4Hn1aa+E8T3ATGGPcv/f+zpwzTPNpRg2H2LZtL0btP1/DbMoXFXyFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/75e0f596002800b6b0e8e280f574bd8b/8c557/4.png\"\n        srcset=\"/static/75e0f596002800b6b0e8e280f574bd8b/4edbd/4.png 175w,\n/static/75e0f596002800b6b0e8e280f574bd8b/13ae7/4.png 350w,\n/static/75e0f596002800b6b0e8e280f574bd8b/8c557/4.png 700w,\n/static/75e0f596002800b6b0e8e280f574bd8b/e996b/4.png 1050w,\n/static/75e0f596002800b6b0e8e280f574bd8b/2cefc/4.png 1400w,\n/static/75e0f596002800b6b0e8e280f574bd8b/2215f/4.png 1548w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>서버 사이드 렌더링을 위해 사용된 Svelte API는 Svelte 5의 <a href=\"https://svelte-5-preview.vercel.app/docs/imports#svelte-server-render\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">render()</code></a>입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>FastifyVite<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  root<span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createRenderFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Page <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> body<span class=\"token operator\">:</span> element <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>Page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> element <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">render()</code> 함수는 head 및 body의 속성도 반환합니다.</p>\n<h2 id=\"solid\" style=\"position:relative;\"><a href=\"#solid\" aria-label=\"solid permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solid</h2>\n<p>4위는 <strong>초당 907건의 요청을 처리하는</strong> <a href=\"https://www.solidjs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SolidJS</a>가 차지했습니다. Svelte보다 매우 근소한 차이로 뒤처집니다. Solid는 <a href=\"https://www.youtube.com/watch?v=hw3Bx5vxKl0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React의 매우 유망한 대안이지만, 아직 생태계가 성숙하지 않은 상태입니다.</a></p>\n<p>우리가 주목한 한 가지는 SolidJS가 실제로 수화(Hydration) 과정의 일부로 ID를 사용하는 데 어려움을 겪고 있다는 것입니다. Vue와 Solid 각각에서 생성된 마크업을 비교해 보세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div class=\"tile\" style=\"left: 196.42px; top: 581.77px\">\n&lt;div data-hk=1c2397 class=\"tile\" style=\"left: 196.42px; top: 581.77px\"></code></pre></div>\n<p>이는 성능 저하의 상당 부분이 유선으로 전송해야 하는 이 추가 조각에서 발생한다는 것을 의미합니다. 하지만 저희는 수화 등의 클라이언트 기능을 활성화한 정상적인 실제 상황에서 프레임워크가 어떻게 작동하는지 정확히 검증하고 싶었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fcab300d7a2ec982decd0b0a6b42fc14/2215f/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVQY012OzXKEMAyDSfyfwIUDpEdm+/6vqB2HLdP2pESSP3vhCFRVUK1gM1RmsAiqO4gI1BpIBJSZO1h19vmTVZF7Tm32F3LHwoxaClgNhegvMALEDFJFMZvDJcH/gCWPSuDXGPh+vWBmsNzMDBGBm6KUgrX3WQx3CDNUZHqqihYxNb3UWiuWfd9xHAe2bbtB7jP80Vz0vN3vf8Tj/+6lLmMMXNeF8zynmeDUdV3RWnu8LPfeEREzS808vYSml/oGSyhsvJSda2EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/fcab300d7a2ec982decd0b0a6b42fc14/8c557/5.png\"\n        srcset=\"/static/fcab300d7a2ec982decd0b0a6b42fc14/4edbd/5.png 175w,\n/static/fcab300d7a2ec982decd0b0a6b42fc14/13ae7/5.png 350w,\n/static/fcab300d7a2ec982decd0b0a6b42fc14/8c557/5.png 700w,\n/static/fcab300d7a2ec982decd0b0a6b42fc14/e996b/5.png 1050w,\n/static/fcab300d7a2ec982decd0b0a6b42fc14/2cefc/5.png 1400w,\n/static/fcab300d7a2ec982decd0b0a6b42fc14/2215f/5.png 1548w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>보일러 플레이트의 경우, @fastify/vite의 <code class=\"language-text\">createRenderFunction</code> 훅을 사용하여 Solid 컴포넌트 함수(<code class=\"language-text\">createApp</code>)를 캡처했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> renderToString <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'solid-js/web'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>FastifyVite<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  root<span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createRenderFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        element<span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>createApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"preact\" style=\"position:relative;\"><a href=\"#preact\" aria-label=\"preact permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Preact</h2>\n<p>React의 인기 동생으로 5위를 차지한 Preact는 <strong>초당 717건의 요청을 처리합니다.</strong> Preact는 React와 매우 유사하지만, 더 빠르고 가볍게 만드는 <a href=\"https://preactjs.com/guide/v10/differences-to-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">많은 차이점</a>이 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6538f0885c26290df1abcacd23500023/2215f/6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuklEQVQY02WO0YrFMAhEm2iMSehLoYXefSr9/2+cZcwGLuzTqDMe3bQ15FIgOUNrRRaBloLcGkQVMsZUeu4zUytUJDzurhkZm7ojcYFAM6QFdIdw6Q8cnlloeDlDep9Azswm8Ofzwfu+MDM4r4hEXQlICZ3AnOH8jsdU0ViXgsZPVSNrpSAReBwHzvPEvu8T6o5aa+jqW2v/PKp91dGbYbvvG8/z4LquGI4xItR7DxCVx5a3ZlTmvvPUXzW+bI1Ix092AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6\"\n        title=\"6\"\n        src=\"/static/6538f0885c26290df1abcacd23500023/8c557/6.png\"\n        srcset=\"/static/6538f0885c26290df1abcacd23500023/4edbd/6.png 175w,\n/static/6538f0885c26290df1abcacd23500023/13ae7/6.png 350w,\n/static/6538f0885c26290df1abcacd23500023/8c557/6.png 700w,\n/static/6538f0885c26290df1abcacd23500023/e996b/6.png 1050w,\n/static/6538f0885c26290df1abcacd23500023/2cefc/6.png 1400w,\n/static/6538f0885c26290df1abcacd23500023/2215f/6.png 1548w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>동기식 서버 사이드 렌더링에 사용되는 Preact API는 <a href=\"https://www.npmjs.com/package/preact-render-to-string\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">renderToString()</code></a>입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> renderToString <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'preact-render-to-string'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>FastifyVite<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  root<span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createRenderFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        element<span class=\"token operator\">:</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span><span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"react\" style=\"position:relative;\"><a href=\"#react\" aria-label=\"react permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React</h2>\n<p>React 19 RC는 초당 572건의 요청을 처리하며 6위를 차지했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04b19c61c15bcfb6fcdcb65700967201/29007/7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqUlEQVQY00WNSZIDQQgD2ywCAa5j+9ye//9xoryE8wSESB0CuJmTagZASQe8SjLdzGY0Apma6ap7zQS5Y2aHAKbqmWKGCCXN3UmJMLNtAfYzaapWrZEfl9nx93wiYmbs1TzdIlIk3FV13e9yu2VEkaraVcyMiK4SkeN8PNZaAEhWFSK6O79UVWbyy750kwTQ3cd1Xed57s6Z7o6ItdZb1D8+c2bOTFW9Y/8bIQne609BkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7\"\n        title=\"7\"\n        src=\"/static/04b19c61c15bcfb6fcdcb65700967201/8c557/7.png\"\n        srcset=\"/static/04b19c61c15bcfb6fcdcb65700967201/4edbd/7.png 175w,\n/static/04b19c61c15bcfb6fcdcb65700967201/13ae7/7.png 350w,\n/static/04b19c61c15bcfb6fcdcb65700967201/8c557/7.png 700w,\n/static/04b19c61c15bcfb6fcdcb65700967201/e996b/7.png 1050w,\n/static/04b19c61c15bcfb6fcdcb65700967201/2cefc/7.png 1400w,\n/static/04b19c61c15bcfb6fcdcb65700967201/29007/7.png 1600w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>동기식 서버 사이드 렌더링에 사용되는 React API는 <a href=\"https://react.dev/reference/react-dom/server/renderToString\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">renderToString()</code></a>입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> renderToString <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/server'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>FastifyVite<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  root<span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createRenderFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createApp <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        element<span class=\"token operator\">:</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span><span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><img src=\"/055e8470fbcdbfa2fcdb64c360348f17/8.avif\" alt=\"\"></p>\n<p>💡 그렇다면 이 결과는 무엇을 의미할까요?</p>\n<p>맨 위에는 fastify-html과 Vue가 있고 그 뒤를 Svelte와 Solid가 바짝 뒤쫓고 있습니다. 아마도 Vue와 Svelte가 SSR 성능과 생태계 성숙도 사이에서 가장 좋은 절충안을 제시할 것입니다.</p>\n<p>앞서 언급했듯이, 본격적인 프런트엔드 프레임워크를 없애고 최소한의 템플릿을 고수함으로써 성능에서 어떤 이점을 얻을 수 있는지 보여주기 위해 fastify-html 테스트가 기준선으로 추가되었습니다.</p>\n<blockquote>\n<p>🚀 한국어로 된 프런트엔드 아티클을 빠르게 받아보고 싶다면 <a href=\"https://kofearticle.substack.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Korean FE Article</a>을 구독해주세요!</p>\n</blockquote>","fields":{"slug":"/ssr-performance-showdown/"},"frontmatter":{"title":"(번역) SSR 성능 대결","date":"2024-09-24","lastUpdated":"2024-09-24","description":null,"tags":["SSR"]}},"previous":{"fields":{"slug":"/understanding-react-compiler/"},"frontmatter":{"title":"(번역) 리액트 컴파일러 이해하기"}},"next":{"fields":{"slug":"/optimising-for-high-latency-environments/"},"frontmatter":{"title":"(번역) 지연 시간이 긴 환경 최적화하기"}}},"pageContext":{"id":"b8559a29-c1ce-50de-98f6-44bc809a8611","previousPostId":"32ba0f22-54af-5862-88c2-02240230e55e","nextPostId":"962d1908-2aab-5cb6-9ff6-c0b6a88cf2a9","ogImage":"public/og-image/ssr-performance-showdown/index.png"}},"staticQueryHashes":["2260143708","984448874"]}