{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/react-compiler-performs-on-real-code/","result":{"data":{"site":{"siteMetadata":{"title":"emewjin.log","siteUrl":"https://emewjin.github.io"}},"markdownRemark":{"id":"c46c6043-3c5a-5ddb-b947-1a4bb1f01349","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%9D%98-%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81%EA%B3%BC-%EB%A9%94%EB%AA%A8%EC%9D%B4%EC%A0%9C%EC%9D%B4%EC%85%98-%EB%AC%B8%EC%A0%9C\">리액트의 리렌더링과 메모이제이션 문제</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B5%AC%EC%9B%90%EC%9E%90-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC-\">구원자 리액트 컴파일러 🚀</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC%EB%A5%BC-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%98%88%EC%A0%9C%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\">리액트 컴파일러를 간단한 예제에 적용해보기</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%A0%9C-%EC%95%B1%EC%97%90%EC%84%9C%EC%9D%98-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC\">실제 앱에서의 리액트 컴파일러</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B4%88%EA%B8%B0-%EB%A1%9C%EB%93%9C-%EC%84%B1%EB%8A%A5%EA%B3%BC-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC\">초기 로드 성능과 리액트 컴파일러</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%EC%84%B1%EB%8A%A5%EA%B3%BC-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC\">상호작용 성능과 리액트 컴파일러</a></p>\n<ul>\n<li><a href=\"#%EC%B2%AB-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%B8%A1%EC%A0%95%ED%95%98%EA%B8%B0\">첫 페이지 측정하기</a></li>\n<li><a href=\"#%EB%91%90-%EB%B2%88%EC%A7%B8-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%B8%A1%EC%A0%95\">두 번째 페이지 측정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC%EA%B0%80-%EB%AA%A8%EB%93%A0-%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81%EC%9D%84-%EC%9E%A1%EC%95%84%EB%82%BC-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C%EC%9A%94\">리액트 컴파일러가 모든 리렌더링을 잡아낼 수 있을까요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%84%EB%8B%A8-%EC%9A%94%EC%95%BD\">간단 요약</a></p>\n</li>\n</ul>","excerpt":"원문: How React Compiler Performs on Real Code 리액트 컴파일러가 초기 로드 및 인터랙션 성능에 미치는 영향을 수치와 함께 살펴봅니다. 이 글에서 사용된 수치는 실제 앱에서 측정되었습니다. 유튜브: How React Compiler Performs On…","html":"<blockquote>\n<p><a href=\"https://www.developerway.com/posts/how-react-compiler-performs-on-real-code\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">원문: How React Compiler Performs on Real Code</a></p>\n</blockquote>\n<p>리액트 컴파일러가 초기 로드 및 인터랙션 성능에 미치는 영향을 수치와 함께 살펴봅니다. 이 글에서 사용된 수치는 실제 앱에서 측정되었습니다.</p>\n<p><a href=\"https://www.youtube.com/watch?v=T-rHmWSZajc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">유튜브: How React Compiler Performs On Real Code</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6469383341c5f30268e238fe39347e9/a5d4d/1.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRlQAAABXRUJQVlA4IEgAAABwAwCdASoUAA0APtFUo0uoJKMhsAgBABoJYwC/OB6P5MNAGAAA/vOWG6xUWyQfMKzV3QyDVhPW0P8L9aco/YHhITSWDOtgAAA='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/c6469383341c5f30268e238fe39347e9/426ac/1.webp\"\n        srcset=\"/static/c6469383341c5f30268e238fe39347e9/c54d4/1.webp 175w,\n/static/c6469383341c5f30268e238fe39347e9/a3432/1.webp 350w,\n/static/c6469383341c5f30268e238fe39347e9/426ac/1.webp 700w,\n/static/c6469383341c5f30268e238fe39347e9/a5d4d/1.webp 1000w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 글은 제가 “React Advanced” 컨퍼런스에서 발표한 내용을 기반으로 구성되었습니다. 글보다 영상을 선호하신다면 <a href=\"https://www.youtube.com/watch?v=T-rHmWSZajc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How React Compiler Performs On React Code</a>을 확인해 보세요.</p>\n<hr>\n<p>지난 몇 년 동안 리액트 커뮤니티에서 가장 큰 흥분과 기대를 불러일으킨 것 중 하나는 리액트 컴파일러(이전의 리액트 Forget)로 알려진 도구였습니다. 그럴 만한 이유가 있습니다. 컴파일러의 핵심 전제는 리액트 앱의 전반적인 성능을 향상시킬 수 있다는 것입니다. 또 다른 긍정적인 결과로는 리렌더링, 메모이제이션, 그리고 <code class=\"language-text\">useMemo</code> 및 <code class=\"language-text\">useCallback</code> 훅에 대해 더 이상 신경 쓰지 않아도 된다는 점이 있습니다.</p>\n<p>하지만 애초에 리액트의 성능에는 어떤 문제가 있었을까요? 그리고 왜 많은 개발자들이 필사적으로 메모이제이션과 그 훅들을 잊고 싶어할까요? 이 약속은 얼마나 현실적일까요?</p>\n<p>이 글에서는 이러한 질문에 답해보려 합니다. 컴파일러가 해결하려는 문제, 컴파일러 없이 어떻게 해결되는지, 실제 코드에서 컴파일러가 어떻게 작동하는지를 요약합니다. 이를 위해 제가 한동안 작업해 온 앱에 컴파일러를 적용해 성능을 측정해 보았습니다.</p>\n<h2 id=\"리액트의-리렌더링과-메모이제이션-문제\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%9D%98-%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81%EA%B3%BC-%EB%A9%94%EB%AA%A8%EC%9D%B4%EC%A0%9C%EC%9D%B4%EC%85%98-%EB%AC%B8%EC%A0%9C\" aria-label=\"리액트의 리렌더링과 메모이제이션 문제 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리액트의 리렌더링과 메모이제이션 문제</h2>\n<p>우선, 정확히 어떤 문제가 있는지 살펴봅시다.</p>\n<p>대부분의 리액트 앱은 사용자에게 상호작용 UI(사용자 인터페이스)를 표시하도록 작성되었습니다. 사용자가 UI와 상호작용할 때, 우리는 보통 그 상호작용에서 파생된 새로운 정보로 페이지를 업데이트하고 싶어 합니다. 리액트에서는 이를 위해 <em>리렌더</em>를 호출합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e486ce25c41823020b2fe2c64033903b/8b70b/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACB0lEQVQoz3WSO28TURCFXeTp2Lve+9yHd+PYOH5JxJg4WRcksoAOiZJUVKmACgooKJEoANFRUEQpQEKCgoYOCYlfQMM/oKCDBonuQ3edWIhHcTX33pk5Z87MlLTW/OtIKdnY2KDb7dJqtRgMBvR6PcIwRCnF//JKc6exhT19B0FAv99nMpmwNRwynU7Z398njuOC7PdYcwLm3iV3EUIgq2WUFH+BaiGoa10c3/fnvrnVmqpUCHVaoRRk9ZjGpWvYrIkSwbx8l7Qex8ShLWzyh1x3N1pxpWnpRIbAVbjm1bj99Ig7Lz5QURFGzeRopQr2TpYhtaaRJDTiGHEi18msScXZ9YRP9w84nGyy4gWUbLPD6OZjDq5e4OLQpyYcu5oPJhI1lF8lDHy0CAqS0+oCIbn34CHv337k8PINyt4aJa0kXnmV2FRoZZosjLDGzBpvQ/qjnFG+x7l8j0ZnMOu3UoTGYLWmtzVkNJnSbY+QUlByjMZapDLUhKJuLZtpSqolrf6Qz1++8/XbD34CT45e462u0M5SztSTAtT3PKqVMrXAmw3FMbbbbfJ8l/F4zPntbeppihUBWavDo+cveXb8iuM377h+6y7Cq5JYS5pl5HnOeGeH3d282FWHVeyhMYYoikiSpNizon9KFbKXlxZZXlpicWGBylq56KH7d0NxOS7e5TkMt4e/AABEG05/lnaSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/e486ce25c41823020b2fe2c64033903b/8c557/2.png\"\n        srcset=\"/static/e486ce25c41823020b2fe2c64033903b/4edbd/2.png 175w,\n/static/e486ce25c41823020b2fe2c64033903b/13ae7/2.png 350w,\n/static/e486ce25c41823020b2fe2c64033903b/8c557/2.png 700w,\n/static/e486ce25c41823020b2fe2c64033903b/e996b/2.png 1050w,\n/static/e486ce25c41823020b2fe2c64033903b/8b70b/2.png 1266w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>리액트의 리렌더링은 일반적으로 <em>연쇄적</em>입니다. 컴포넌트의 리렌더링이 트리거될 때마다 내부에 중첩된 모든 컴포넌트의 리렌더링이 트리거되고, 이는 다시 내부의 모든 컴포넌트의 리렌더링을 트리거하는 식으로 리액트 컴포넌트 트리의 끝에 도달할 때까지 반복됩니다.</p>\n<p><img src=\"/d523cfa2d3dab0c55c2d751fca61b721/3.gif\" alt=\"re-renders-in-motion.gif\"></p>\n<p>일반적으로 요즘 리액트는 충분히 빠르기 때문에 이 과정을 크게 걱정하지 않아도 됩니다. 그러나 이러한 다운스트림 리렌더링이 일부 무거운 컴포넌트나 너무 자주 리렌더링되는 컴포넌트에 영향을 미치는 경우 성능 문제가 발생할 수 있습니다. 앱이 느려지기 때문입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05191ff1e893ec6aaead87b39204e5d3/12c06/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWklEQVQ4y5WTv29SURTHX1ITQB48eLzHrwfUVvqeQiWADKh1YHPQ2IQidhEYGZgg6iqGgcrUdiCxA4PtxKiJE0v9B3CuS2UQYbAJ1DSEfM09CaQoNPEmNyf3nnM+73vOPY+TJAmLtizLsNls8Hq98Pl8dL4qnm3uKpgoilAUBV+Oj/G13YaqqrBYLLDb7f8HZDCnwwGHwwGz2Yx2u43z898Ihe7AarXC5XItVMvNg7Ekg8FAasxmAQ/ux/Hk8SNIkgxBMJOPxcyDcv/ARJFK20puIRqJQnHbEVQV3PY74fM4EIlEyKep2lzoDJCVqNfrkc1mwNb+3j68LhHLXgUeRcGyR8Le7i758vk8xbKchUDWbBPPIx6/h19nZ3hTfovrRp7ueZMJHMchlUqh3+/j6eYmlb4QyBxOpxNW0YabN9yIhlQEb61AliUIgoBnySRSySRyuRyy2SxyLzI0SmwSLpc9BTL5S0vXsLbiRmR9BXdDqwhqPkTWV0nJ54+fMLq4wHg8xmAwwI/vHQSDQfrY5THiJqW+fvkK73Z2oKlrMBp5WAUDeN4EySYikUig97OHzukpev0+vp2cUB9LpRKNFcufqCQgkz0JCofDiMViOHh/gOfpNCWw4GazSf7RaES20+nA7/dPgVOF7GA0GlEoFNBoNKiP29vblHR0dEQJOp0OlUqF7obDIdlWq4V0Oo1AIEDzOqOQHXiep14xq2kaPhweIpPJ0L/M7svlMi6vbreLWq0Gt9tNMTPASR/ZSzPLWsAeicGnLyhLKBaLqNfrqFar2Hi4QXF/D/cfUJXYX2JiLfUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slow-app.png\"\n        title=\"slow-app.png\"\n        src=\"/static/05191ff1e893ec6aaead87b39204e5d3/8c557/4.png\"\n        srcset=\"/static/05191ff1e893ec6aaead87b39204e5d3/4edbd/4.png 175w,\n/static/05191ff1e893ec6aaead87b39204e5d3/13ae7/4.png 350w,\n/static/05191ff1e893ec6aaead87b39204e5d3/8c557/4.png 700w,\n/static/05191ff1e893ec6aaead87b39204e5d3/e996b/4.png 1050w,\n/static/05191ff1e893ec6aaead87b39204e5d3/2cefc/4.png 1400w,\n/static/05191ff1e893ec6aaead87b39204e5d3/12c06/4.png 2418w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 속도 저하를 해결하는 한 가지 방법은 리렌더링의 연쇄적인 발생을 막는 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/694be6c5cd435fd7a502f46aee4c5562/12c06/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6UlEQVQ4y5WSy47aQBBFkZJIgDQGGxvcxnZsDDZ+YF6bYPMITBYsklVmw47VzOck802THyAfQ5Y3qoocMYpBiqVSq1Xdp6/vrYqqqrhWmqah1WrBsizYts37W+epKrdgiqKg2+3ix8sLfp5O8H0fzWYT7Xb7P4HaHyBdlCQJp9MJ5/MvpOkIsixDCHFV7VWFpE7TVNxJDeTZB3z5vIeqamg0JNRqNQaXQUuBuq7DcRxWYps6Yt9A2Ndhmx1Mp1M8fH1A4Ael0EqZb71eD5/u7xHHMQY9A5YpYAgBy1Dw/P0b6Ht6fES1WkWn07kNpFSFMJDnS/jBEE1Z+dt78/YdjscjzuczDocD6vX6dSCHoGmQlRb6bhdx8B7DvsU+0iOu47ANnuchiiL0Pa807cplCI2mDN8zMYkdzEYuosBGGjncm01n2KzXWK/XyPMcWZaxx/TYpY+VQl3g+wjDCGZXMIACUJQW9I7Gg11AlsslskWGj5sNz2UpkGqxWHAQuhAwDANJMoLrugyl/mQywW63Y4Xb7Zbh5N8/wCKIwWCANE25SaD9fo/xeMw9UhyGIYNWqxWv8/mcPaURK/7ylcLiIq10iGA0PoW/w+GQFRKMVrKAwrk6h9QoqoAQ/PIweZYkCYNM03w1bgXwN6HIhD4whDLJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"re-renders-stopped.png\"\n        title=\"re-renders-stopped.png\"\n        src=\"/static/694be6c5cd435fd7a502f46aee4c5562/8c557/5.png\"\n        srcset=\"/static/694be6c5cd435fd7a502f46aee4c5562/4edbd/5.png 175w,\n/static/694be6c5cd435fd7a502f46aee4c5562/13ae7/5.png 350w,\n/static/694be6c5cd435fd7a502f46aee4c5562/8c557/5.png 700w,\n/static/694be6c5cd435fd7a502f46aee4c5562/e996b/5.png 1050w,\n/static/694be6c5cd435fd7a502f46aee4c5562/2cefc/5.png 1400w,\n/static/694be6c5cd435fd7a502f46aee4c5562/12c06/5.png 2418w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://www.developerway.com/posts/react-re-renders-guide#part3.2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">상태를 하위로 이동시키기</a>, <a href=\"https://www.developerway.com/posts/react-re-renders-guide#part3.3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">컴포넌트를 prop으로 전달하기</a>, 컨텍스트로 상태를 추출하여 prop drilling을 우회하는 솔루션 등 여러 가지 기법이 준비되어 있습니다. 물론 메모이제이션도 마찬가지입니다.</p>\n<p>메모이제이션은 리액트 팀에서 제공한 고차 컴포넌트인 <a href=\"https://react.dev/reference/react/memo\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React.memo</a>로 시작됩니다. 이를 작동시키기 위해서는 원래 컴포넌트를 이 컴포넌트로 감싸고 그 자리에 “메모이제이션된” 컴포넌트를 렌더링하기만 하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 느린 컴포넌트를 메모합니다.</span>\n<span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 어디선가 리렌더를 트리거 합니다.</span>\n\n  <span class=\"token comment\">// 원래의 컴포넌트 대신 메모된 컴포넌트를 렌더링합니다.</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 리액트가 트리에서 이 컴포넌트에 도달하면 멈춰서 프로퍼티(props)가 변경되었는지 확인합니다. 만약 프로퍼티가 변경되지 않았다면 리렌더링이 중단됩니다. 그러나 단 하나의 프로퍼티라도 변경되면, 리액트는 메모이제이션이 발생하지 않았던 것처럼 리렌더링을 계속합니다.</p>\n<p>즉, 메모가 제대로 작동하려면 리렌더링 사이에 모든 프로퍼티가 <em>정확히</em> 동일하게 유지되도록 해야 합니다.</p>\n<p>문자열이나 부울과 같은 원시 값의 경우 간단합니다. 값을 변경하지 않는 것 외에는 다른 작업을 할 필요가 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 어디선가 리렌더를 트리거 합니다.</span>\n\n  <span class=\"token comment\">// \"data\" 문자열은 리렌더링하더라도 동일합니다.</span>\n  <span class=\"token comment\">// 그러므로 메모이제이션은 기대한대로 동작할 것입니다.</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token attr-name\">data</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>123<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그러나 객체, 배열 및 함수와 같은 비원시값은 약간의 도움이 필요합니다.</p>\n<p>리액트는 리렌더링 간에 참조 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">동등성</a>(referential equality)을 사용해 변경 여부를 확인합니다. 컴포넌트 내부에서 이러한 비원시값을 선언하면 리렌더링할 때마다 다시 생성되고 참조가 변경되며 메모이제이션이 작동하지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 어디선가 리렌더를 트리거 합니다.</span>\n\n  <span class=\"token comment\">// \"data\" 객체는 모든 리렌더링 때마다 다시 생성될 것입니다.</span>\n  <span class=\"token comment\">// 메모이제이션이 깨지게 됩니다.</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 문제를 해결하기 위해 <code class=\"language-text\">useMemo와</code> <code class=\"language-text\">useCallback</code> 두 가지 훅을 사용합니다. 이 두 훅은 리렌더링 간에 참조를 유지해줍니다. <code class=\"language-text\">useMemo</code>는 보통 객체나 배열과 함께 사용되며, <code class=\"language-text\">useCallback</code>은 함수와 함께 사용됩니다. 이러한 훅으로 프로퍼티를 감싸는 것을 일반적으로 “프로퍼티 메모하기”라고 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// { id:\"123\" } 객체의 참조가 지금은 보존됩니다.</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 함수에 대한 참조가 지금은 보존됩니다.</span>\n  <span class=\"token keyword\">const</span> onClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 여기의 props는 더 이상 리렌더링 사이에서 변경되지 않습니다.</span>\n  <span class=\"token comment\">// 메모이제이션이 정확하게 동작할 것입니다.</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 리액트가 렌더 트리에서 <code class=\"language-text\">VerySlowComponentMemo</code> 컴포넌트를 만나면 프로퍼티가 변경되었는지 확인하고 아무것도 변경되지 않았음을 알게 되므로 리렌더링을 건너뜁니다. 앱은 더 이상 느리지 않습니다.</p>\n<p>이것은 매우 단순화된 설명이지만 이미 상당히 복잡합니다. 상황을 더 악화시키는 것은 메모한 프로퍼티를 연쇄적인 컴포넌트로 전달하는 경우입니다. 이 경우 더욱 복잡해집니다. 프로퍼티를 변경하려면 중간에 참조가 손실되지 않았는지 확인하기 위해 앞뒤로 추적해야 하기 때문입니다.</p>\n<p>따라서 아예 메모하지 않거나 만일을 대비해 모든 곳에서 메모해 두는 것이 더 쉽습니다. 하지만 이렇게 하면 아름다웠던 코드가 <code class=\"language-text\">useMemo</code>와 <code class=\"language-text\">useCallback</code>으로 뒤덮여 이해하기 어려운 엉망진창이 되어버립니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1548a6e7cb502c10e643f8c5ebe801cb/b1ffc/6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABoUlEQVQoz4VSSYoCQRDsi3gQ9w1Rob244w4qKo1Mo7jhLqKe9T/OVwTnT84DvMUQCSXtiDMNSVdlRUZFRqUWDAbxLgKBwGMdCoUk/sIztP9IuPd6vXC5XHA6nbJ+h38hVIckYmGhUMByucR2u8VisUCz2UQ2m4Xf738itpJqKsEgEcFutxs+nw/VahXdbheZTAbtdhuz2QytVgupVEqCpMRZOTQrO9uKx+NSvN/vRZWu63A4HHIJyTabDabTKVarFXq9HqLR6KtC5VW9XsdkMkGj0RBVNpsN+XwexWJRlFMN81Q9Ho8xHA5RqVTk7EFIIprNJG/u9/tCWiqVhJgeEkiMx+NBuVzGYDCAYRjodDpPHkrLkUhECtni8XjEaDRCOp0WtVRBrz7PZ3xdrzA/TNjtdoTDYVFtmqaQU7XyUmMBFdVqNUnQL77kfD4XTwn+vt3A73Q6yRn92+12Urder8VbekzrpGVuWKxkJ5NJUDltYJuXywX3+x2HwwGxWEzaZhe5XE6wiUTi4aNmHWK15jgoXwjkS7JQDTkF8M/Lfo/OD4xDQbrIp2W/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"app-under-re-renders.png\"\n        title=\"app-under-re-renders.png\"\n        src=\"/static/1548a6e7cb502c10e643f8c5ebe801cb/8c557/6.png\"\n        srcset=\"/static/1548a6e7cb502c10e643f8c5ebe801cb/4edbd/6.png 175w,\n/static/1548a6e7cb502c10e643f8c5ebe801cb/13ae7/6.png 350w,\n/static/1548a6e7cb502c10e643f8c5ebe801cb/8c557/6.png 700w,\n/static/1548a6e7cb502c10e643f8c5ebe801cb/e996b/6.png 1050w,\n/static/1548a6e7cb502c10e643f8c5ebe801cb/2cefc/6.png 1400w,\n/static/1548a6e7cb502c10e643f8c5ebe801cb/b1ffc/6.png 1492w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 상황을 해결하는 것이 리액트 컴파일러의 주요 관심사입니다.</p>\n<h2 id=\"구원자-리액트-컴파일러-\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EC%9B%90%EC%9E%90-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC-\" aria-label=\"구원자 리액트 컴파일러  permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구원자 리액트 컴파일러 🚀</h2>\n<p><a href=\"https://react.dev/learn/react-compiler\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">리액트 컴파일러</a>는 리액트 코어 팀에서 개발한 바벨 플러그인으로, 2024년 10월에 <a href=\"https://react.dev/blog/2024/10/21/react-compiler-beta-release\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">베타 버전</a>이 출시되었습니다.</p>\n<p>빌드하는 동안 “일반적인” 리액트 코드를 컴포넌트, 프로퍼티, 그리고 훅의 의존성이 기본적으로 메모이제이션 되어있는 코드로 변환하려고 시도합니다. 최종 결과는 모든 것이 <code class=\"language-text\">memo</code>, <code class=\"language-text\">useMemo</code>, <code class=\"language-text\">useCallback</code>으로 감싸진 것처럼 동작하는 “일반적인” 리액트 코드가 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/80032fd7c6f60d8c22f455acfb1154c2/fa60d/7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABn0lEQVQoz32SvY4TMRSFp0MR2s2P7fH/eCaZJDvJahEU6aKEgnS0dDRUPAAdD8BD8LAfspONwrKiODqyfXzte86tvA207YqQemJsCCGiaoWQEiklSqmCFDpi1oVECA211uU841mbUWWxNgZjLFprjD1z5yy6rpFSoaTEu8h8sSKlxLBq6boO5zwxWFITcN5T1/W5YNf2hKZFB4/SGiEEwRh6qxGze6ZCEF2iSwuaJrHuHMMiMm9TWbdti7W2dFIJIWmXiafdI+vHgc3mAesco9EbPn/9zo9fv4nijmWaM188YGLAxIgJ/trmLarckvMWHzRWG7zzxR83m/D+0xc+fvuJVwJnDOunnu2Hd3SrFa6JyIu/t6jOnhnETBRztVIsvKfzjtn4nru3o7KfxaExxOiIORSlrqHdcpWNVK+8lIvUtS4B5XBK+qomW1Tau+huJ6H8UN6MR+bpdMp4PGaSMZlckYN6efnluhT861dCcDweORwOnE6nwrvdrvB+vyeEUDSvdfRPwefX+r5nGAa2223h5XLJZrMprC/D/L+CfwBOdAbjD18KNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"react-compiler-pic.png\"\n        title=\"react-compiler-pic.png\"\n        src=\"/static/80032fd7c6f60d8c22f455acfb1154c2/8c557/7.png\"\n        srcset=\"/static/80032fd7c6f60d8c22f455acfb1154c2/4edbd/7.png 175w,\n/static/80032fd7c6f60d8c22f455acfb1154c2/13ae7/7.png 350w,\n/static/80032fd7c6f60d8c22f455acfb1154c2/8c557/7.png 700w,\n/static/80032fd7c6f60d8c22f455acfb1154c2/e996b/7.png 1050w,\n/static/80032fd7c6f60d8c22f455acfb1154c2/2cefc/7.png 1400w,\n/static/80032fd7c6f60d8c22f455acfb1154c2/fa60d/7.png 1792w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>거의 다 끝났습니다! 실제로는 훨씬 더 복잡한 변환을 수행하며 가능한 한 효율적으로 코드에 맞게 조정됩니다. 예를 들어 다음과 같은 경우입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 코드는 이렇게 변환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> <span class=\"token function\">_c</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> t0<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>$<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> Symbol<span class=\"token punctuation\">.</span><span class=\"token function\">for</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react.memo_cache_sentinel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      id<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> onClick <span class=\"token operator\">=</span> _temp<span class=\"token punctuation\">;</span>\n    t0 <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    $<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> t0<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    t0 <span class=\"token operator\">=</span> $<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> t0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">_temp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">onClick</code>이 <code class=\"language-text\">_temp</code> 변수로 캐시되지만 <code class=\"language-text\">data</code>는 <code class=\"language-text\">if</code>문 안으로 이동하는 것을 볼 수 있습니다. <a href=\"https://playground.react.dev/#N4Igzg9grgTgxgUxALhAMygOzgFwJYSYAEACgIYwKY4AUAlEcADqYtFFyFg5EAmZOMkQC8jInl7IiTEAEYATAGYZRAL4BuFmw5cehAMIAbPHADWIovREA+Rto1biRSjljEAPPogBbAA6EqPUwjE1NhYANjM1U+ATJw-kEYgHprFlUWEFUgA\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">컴파일러 플레이그라운드</a>에서 컴파일러를 좀 더 사용해 볼 수 있습니다.</p>\n<p>작동 원리는 매우 흥미롭기 때문에 더 자세히 알고 싶다면 <a href=\"https://www.youtube.com/watch?v=0ckOUBiuxVY&#x26;t=9309s&#x26;ab_channel=ReactConf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">컴파일러 심층 분석과 같은 리액트 코어 팀의 동영상</a>도 있습니다.</p>\n<p>하지만 이 글에서는 리액트 컴파일러에 대한 기대가 현실과 일치하는지, 저같은 일반 사용자가 사용할 준비가 되어 있는지에 더 관심이 있습니다.</p>\n<p>“컴파일러가 모든 것을 메모이제이션한다”는 말을 들으면 대부분의 사람들은 아래 질문들을 떠올릴 겁니다.</p>\n<ul>\n<li>\n<p><strong>초기 로드 성능은 어떨까요?</strong> “모든 것을 기본적으로 메모이제이션하는 것”에 반대하는 주요 주장 중 하나는 모든 것이 메모이제이션되면 리액트가 훨씬 더 많은 작업을 미리 해야 하기 때문에 초기 로드 성능에 부정적인 영향을 미칠 수 있다는 것입니다.</p>\n</li>\n<li>\n<p><strong>성능에 긍정적인 영향을 미칠까요?</strong> 리렌더링은 정말 그렇게 큰 문제일까요?</p>\n</li>\n<li>\n<p><strong>정말 모든 리렌더링을 잡아낼 수 있을까요?</strong> 자바스크립트는 유동적이고 모호한 것으로 악명이 높습니다. 컴파일러는 정말 모든 것을 잡아낼 만큼 똑똑할까요? 다시는 메모이제이션나 리렌더링에 대해 고민할 필요가 없다는 것이 사실일까요?</p>\n</li>\n</ul>\n<p>이 질문에 답하기 위해 몇 가지 예제에서 컴파일러를 실행해 실제로 작동하는지 확인하고, 작업 중인 앱의 몇몇 페이지에서 실행해 보았습니다.</p>\n<h2 id=\"리액트-컴파일러를-간단한-예제에-적용해보기\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC%EB%A5%BC-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%98%88%EC%A0%9C%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"리액트 컴파일러를 간단한 예제에 적용해보기 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리액트 컴파일러를 간단한 예제에 적용해보기</h2>\n<p><strong>첫번째 예제</strong>는 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOpen<span class=\"token punctuation\">,</span> setIsOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setIsOpen</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isOpen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">toggle</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponent</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>대화 상자, 이 대화 상자에 대한 상태, 대화 상자를 열 수 있는 버튼, 그 아래 어딘가에 <code class=\"language-text\">VerySlowComponent</code>가 있는 컴포넌트가 있습니다. 리렌더링하는 데 500ms가 걸린다고 가정해 봅시다.</p>\n<p>일반적인 리액트 동작은 상태가 변경될 때 모든 것을 다시 렌더링하는 것입니다. 결과적으로 느린 컴포넌트로 인해 대화 상자가 느리게 열릴 것입니다. 메모이제이션을 사용하여 문제를 해결하려면 느린 컴포넌트를를 <code class=\"language-text\">memo</code>로 감싸야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOpen<span class=\"token punctuation\">,</span> setIsOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setIsOpen</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isOpen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">toggle</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>대신 코드에 대해 컴파일러를 활성화해 보겠습니다. 우선, 리액트 개발자 도구에서 다음과 같은 것을 확인할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 558px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0fa8d895365907cbb6208d2d038316c6/42a8d/8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACw0lEQVQoz4WTz28bVRDH98aBfwJx4A+oVBUIgr+g5YA4IYHEgSsghATcgAKtoJRDVEpBVZoSIiSaVEgttImStgk0TQh2aeykSerUXnsdr70/3nv7dr327vugjSsuCPGRRvM0mhnNvK/GyvMcYwzG5MgwIfRjtErxuppuJ8LvxXQcReDHeK5GyT6TdwTfLAs+v+7y4+o+eW4oCIIAq3ikaUrgaZy6pNNStArfVIiuxm0InF2fdkPQT4YHhb0oY1+OLNCjgQqEEFgYyPMMJfo4DUnblgeT2Lbij6pgtSL4/V7Ibk0yHGT8G0OxZUEYhlhZboqeaD1kbyeg1VR4jmJhM+LVaY9XpjyOnHrAtfvyoCgz/CdSRcXKjzJMRuxpsqhPGo7+q7wVUtmVlLcCeq5mKBNMkjJTVny3LPhirselksDvNLFr23SaD7E2XEOlayg7GdfWJb+uCW5sRFxfFyz8KZlfF1z9zWe+JLmyEnCjGvPadMCL533GTtu8/n2Ty0sVzs3c5PLyJpb10YDHTgx48kzGC1Nw+ILhyIWcZycNYxcNL8/C8z/A4QnDcxdznpnIOfTtkEPn4YmTLke/LPP08bs89e4tHv+ghvXxrZzjSzmf3hxyYi7ms7mYkwt93v8l4dik4uiEZOyMz5tXEr5eyxm/k3H6ds6pFcMni5rxRZfxxS5fzTt8eHUfK0kN6bBQaMjOVkijoWnXFYuViLdnPd6a8Xnp3B7zWyNRohTiFKK+oRA9yUCl0DfgegqrGRocCQ0v5962olrTVB9o7m5KbpdCVv8SrJRCypuK0kZItRbz3s8Bb0z3OHa2yTs/tWgL2FdwvymwZAJhnOPJjEZTU7c1diumYWtarRjb1tTrCqeTHMRdb8ClcsTUWsTZJZ/ZUoDsgx5AyxWjSxkMUty2ZGejx8Nt/x/bK/xOwP/y6FKkFPwNQ3tZriqt92AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"react-compiler-working.png\"\n        title=\"react-compiler-working.png\"\n        src=\"/static/0fa8d895365907cbb6208d2d038316c6/42a8d/8.png\"\n        srcset=\"/static/0fa8d895365907cbb6208d2d038316c6/4edbd/8.png 175w,\n/static/0fa8d895365907cbb6208d2d038316c6/13ae7/8.png 350w,\n/static/0fa8d895365907cbb6208d2d038316c6/42a8d/8.png 558w\"\n        sizes=\"(max-width: 558px) 100vw, 558px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>즉, <code class=\"language-text\">Button</code>와 <code class=\"language-text\">VerySlowComponent</code>가 컴파일러에 의해 메모이제이션되었음을 의미합니다. 그리고 <code class=\"language-text\">VerySlowComponent</code> 내부에 <code class=\"language-text\">console.log</code>를 추가하면, 상태를 변경해도 실행되지 않습니다. 이는 메모이제이션이 실제로 작동하고 있으며, 성능 문제가 해결되었음을 의미합니다. 대화창을 트리거할 때 지연 없이 팝업됩니다.</p>\n<p><img src=\"/3394208b644ea8798f4520669ca904aa/9.gif\" alt=\"compiler-in-motion.gif\"></p>\n<p><strong>두 번째 예시</strong>에서는 느린 컴포넌트에 더 많은 프로퍼티를 추가했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOpen<span class=\"token punctuation\">,</span> setIsOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setIsOpen</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isOpen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">toggle</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      // \"data\"와 \"onClick\" props를 전달합니다.\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponent</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>수동으로는 <code class=\"language-text\">memo</code>, <code class=\"language-text\">useMemo</code>, <code class=\"language-text\">useCallback</code> 세 가지 도구를 모두 사용하여 메모해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOpen<span class=\"token punctuation\">,</span> setIsOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> onClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setIsOpen</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isOpen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">toggle</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>컴파일러는 여기서도 완벽하게 작동했으며 결과는 첫 번째 예제와 동일했습니다. 모든 것이 정확하게 메모되고 <code class=\"language-text\">Dialog</code>가 지연 없이 열립니다.</p>\n<p><strong>세 번째 예제</strong>에서는 다음과 같이 느린 컴포넌트에 다른 컴포넌트를 자식으로 전달했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOpen<span class=\"token punctuation\">,</span> setIsOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setIsOpen</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isOpen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">toggle</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\n      &lt;!-- Acceps Child now -->\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponent</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">VerySlowComponent</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 코드를 메모하는 방법을 바로 떠올릴 수 있나요?<br>\n대부분의 사람들은 다음과 같이 생각할 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ChildMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      ...\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildMemo</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">VerySlowComponentMemo</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>안타깝게도 이는 잘못된 방법입니다. 이 트리 형태의 구문은 단순히 <code class=\"language-text\">children</code> 프로퍼티를 위한 문법적 설탕에 불과합니다. 위의 코드는 아래와 같이 쉽게 재작성될 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ChildMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      ...\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token attr-name\">children</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildMemo</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>또한, 여기서 <code class=\"language-text\">&lt;ChildMemo /></code>는 <code class=\"language-text\">React.createElement</code> 함수 호출의 결과로 생성된 요소에 대한 문법적 설탕에 불과합니다. 이는 <code class=\"language-text\">type</code> 속성이 <code class=\"language-text\">ChildMemo</code> 함수를 가리키는 객체입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ChildMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      ...\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span> <span class=\"token attr-name\">children</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> ChildMemo <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>안타깝게도 여기서 우리가 직면한 문제는, 메모이제이션된 컴포넌트에 메모이제이션되지 않은 객체가 프로퍼티로 전달된다는 점입니다. 메모이제이션은 작동하지 않으며, 상태가 변경될 때마다 <code class=\"language-text\">VerySlowComponentMemo</code>가 다시 렌더링됩니다.</p>\n<p>이 예제를 메모이제이션하는 올바른 방법은 다른 객체와 동일하게 처리하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> VerySlowComponentMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>VerySlowComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ChildMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SimpleCase1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildMemo</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      ...\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VerySlowComponentMemo</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">VerySlowComponentMemo</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>메모이제이션되지 않은 세 번째 예제에서 컴파일러를 활성화한 결과는 이전과 정확히 동일했습니다. 컴파일러는 이를 올바르게 메모이제이션했고, 성능 문제가 해결되었습니다.</p>\n<p>현재까지 컴파일러는 3전 3승입니다. 🏆🏆🏆</p>\n<p>하지만 이런 작은 예제는 “쉽습니다.” 컴파일러를 제대로 테스트하기 위해 한동안 작업해 온 <a href=\"https://www.buckets-ui.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">실제 앱</a>에서 실행해 보았습니다.</p>\n<h2 id=\"실제-앱에서의-리액트-컴파일러\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%A0%9C-%EC%95%B1%EC%97%90%EC%84%9C%EC%9D%98-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC\" aria-label=\"실제 앱에서의 리액트 컴파일러 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실제 앱에서의 리액트 컴파일러</h2>\n<p>이 앱은 완전히 새롭게 만들어졌으며, 타입스크립트로 작성되어 있고, 레거시 코드가 전혀 없으며, 오직 훅만 사용됩니다. 그리고 모든 것이 (대체로) 최신의 모범 사례를 따릅니다. 랜딩 페이지와 몇 개의 내부 페이지가 있으며, 전체 코드는 약 15,000줄입니다. 아주 큰 앱은 아니지만 제대로 테스트하기에 충분하다고 생각합니다.</p>\n<p>컴파일러를 활성화하기 전에 리액트 팀에서 제공한 <a href=\"https://react.dev/learn/react-compiler\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">헬스 체크 및 eslint</a>를 실행했습니다. 다음은 헬스 체크 결과입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Successfully compiled 361 out of 363 components.\n\nFound no usage of incompatible libraries.</code></pre></div>\n<p>그리고 ESLint 규칙 위반은 0건이었습니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/lighthouse/overview\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Lighthouse</a>를 사용해 초기 로드 및 상호작용 성능을 측정했습니다. 모든 측정은 프로덕션 빌드 상태에서 모바일 모드로 CPU를 4배 느리게 한 상태에서 수행되었습니다. 모든 테스트는 5회 반복한 후 평균 값을 추출했습니다.</p>\n<p>이제 질문에 답할 시간입니다.</p>\n<h2 id=\"초기-로드-성능과-리액트-컴파일러\" style=\"position:relative;\"><a href=\"#%EC%B4%88%EA%B8%B0-%EB%A1%9C%EB%93%9C-%EC%84%B1%EB%8A%A5%EA%B3%BC-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC\" aria-label=\"초기 로드 성능과 리액트 컴파일러 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>초기 로드 성능과 리액트 컴파일러</h2>\n<p>가장 먼저 측정한 페이지는 앱의 “랜딩” 페이지였습니다. 컴파일러 활성화 전의 통계는 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/52123611b8f2c78d46e33f111501245b/d6a46/10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAxUlEQVQoz42RUW/DIAyE8///3vaaLqvaSRPGUZsGCAbfBKoikUTKLN0D8GHfQUfhAWaGtRZEBOccSqkq1lJFXXmPB3Plyh1jDEIIDd/N0eHK36CJIFEgIivQqGxKwjwMeA0DlmWpSik1fBdzqo1iVUTOed+sTFfFogmpcN7XwUd89zMTPr8+0N96sOUKbSO//YFlwo3uILJr5OKyiaw5gQJhkudx1I1LLw7bahz+uhFsLEYed+9x2PTkvH7KhXqYyZzC/9EfWP0lQ/VoOnAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"initial-load-stats-before.png\"\n        title=\"initial-load-stats-before.png\"\n        src=\"/static/52123611b8f2c78d46e33f111501245b/8c557/10.png\"\n        srcset=\"/static/52123611b8f2c78d46e33f111501245b/4edbd/10.png 175w,\n/static/52123611b8f2c78d46e33f111501245b/13ae7/10.png 350w,\n/static/52123611b8f2c78d46e33f111501245b/8c557/10.png 700w,\n/static/52123611b8f2c78d46e33f111501245b/d6a46/10.png 1008w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>컴파일러를 활성화하고 작동하는지 확인합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/806309547e06b51e57bfcada42403f32/2fd48/11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACLUlEQVQ4y5VUTW/aQBD1r+TICQn1D3Dvqb+haq9VT0VpVCVRe6pEC2qFCm2DoEkIMRibtbHxrr+/XrVrQDY4LVnpaWd3Zt7O6HksAUCWZditQztNU2EPh0OBfr+PyWQCWZbF7vt+KU/aGXwv2od34/EYnU4H3W4XvV4Po9EIg8EAQRCcTlhVddUq+k+ukLfOEcfxHkmSHJGeVOGp1f2TsAi+wjBErVZDq9VCs9lEvV6HbdtH8dJhchk7pXPSRqMBSZL2aLfb4p63vyf8T0Olk+MwnJ+/x+XFBa6uLrE2jKMMybQ9rDcOzI0LmwVgbgTDYthQH46fwLRdmNxvu/DCTDyRbpP9CCKW59tOCOpGkB6UNW4fNNzcLyGrJlamh8ndAjPFgL4JxP1kquB+TkAsX/g4NMPF2g7xZ6oI8FxiesctF5tM0gxp9riiGjHgB+HWl0PajVcSJ0gSvud2HKelZ6qUp5QJ9Usq82DPDaHOKXTNwVKmkGcUpuZgSiJ8m/nwo/RRUlFQmZBPQQKiMsynNojC4BEH1zcUz94SPP9AEG2rrRrJIvn2w85bstYeVnOKX7cMrz5beNOz8PXOg86ifPREYHWFRXs/Kb4XQVcdTGUXH7+bOPtB8foLxe9lWCA8FqiCMDe4ILrmQl8yMOJgYwdYGAyMMURhcNIPZE/IW+EVagoToqgLBn3F0Pkp46wzhm6YTyHMD1GYQJWpIFRmXGkLLz9N8eLdNcgTCP8CkpOx03pNT0EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"initial-load-compiler-works.png\"\n        title=\"initial-load-compiler-works.png\"\n        src=\"/static/806309547e06b51e57bfcada42403f32/2fd48/11.png\"\n        srcset=\"/static/806309547e06b51e57bfcada42403f32/4edbd/11.png 175w,\n/static/806309547e06b51e57bfcada42403f32/13ae7/11.png 350w,\n/static/806309547e06b51e57bfcada42403f32/2fd48/11.png 508w\"\n        sizes=\"(max-width: 508px) 100vw, 508px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그리고 결과를 측정합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d49ddc46b5774ae76e134989ae9931ed/a2792/12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABXUlEQVQoz5WSsU7CYBSFmzACAZ6ACQYQJhZNTHkYnXgWQtSEV8BJ7NBKFQcLA+EFHEyMmqhULfxCq/Qv5TOUBAdNjDf5lnuSe0/uucrB0SHmVZdTrU2n06HX623o9/v0Li8xNA1d1yPdsiyGwyHlcplYLEYymSSRSBCPx0mn0yiDwYA/y/N+tPb39qhUKuyqKjvb26iqSqFQQDnvXjDx37l/vGc6nSKlRAaS+XzO2BU8OyPexg6e50Wa7/sR4XKJFALx9IQQIlrSaDRQriyLgJDxzPnh4kPOEe6EmTsjDMNvYblc658unuMwc93vgSftNnejB65vrnl9eWVkj7BtO2Ll8Na+xXZspC8JgmDDYrHgzZ0wngrEZO2wXq+j5HK56MBbpS2KxSKlUol8Pk+1WsVxBf+pZrOJkslkSKVSG1ZJrVLLZrO0jltoZxq6oWOa55im+SuGYURfUavV+AIXfMSMsIhRdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"intial-load-stats-after.png\"\n        title=\"intial-load-stats-after.png\"\n        src=\"/static/d49ddc46b5774ae76e134989ae9931ed/8c557/12.png\"\n        srcset=\"/static/d49ddc46b5774ae76e134989ae9931ed/4edbd/12.png 175w,\n/static/d49ddc46b5774ae76e134989ae9931ed/13ae7/12.png 350w,\n/static/d49ddc46b5774ae76e134989ae9931ed/8c557/12.png 700w,\n/static/d49ddc46b5774ae76e134989ae9931ed/e996b/12.png 1050w,\n/static/d49ddc46b5774ae76e134989ae9931ed/2cefc/12.png 1400w,\n/static/d49ddc46b5774ae76e134989ae9931ed/a2792/12.png 1462w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>첫 번째 이미지는 활성화 전이고, 두 번째 이미지는 활성화 후입니다. 보시다시피 결과는 거의 동일합니다.</p>\n<p>확실히 하기 위해 몇 페이지에서 더 실행해 보았는데 결과는 거의 동일했습니다. 일부 수치는 약간 증가했고 일부는 감소했습니다. 큰 변화는 없었습니다.</p>\n<p>컴파일러에 또 하나의 승리를 추가할 수 있을 것 같습니다(🏆🏆🏆🏆). 제가 조사한 첫 번째 질문에 대한 답은, <strong>컴파일러는 초기 로드에 거의 영향을 미치지 않거나 전혀 영향을 미치지 않는다는 것</strong>입니다. 따라서, 이는 좋은 소식입니다. 모든 것을 메모이제이션하더라도 상황이 나빠지지 않습니다.</p>\n<h2 id=\"상호작용-성능과-리액트-컴파일러\" style=\"position:relative;\"><a href=\"#%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%EC%84%B1%EB%8A%A5%EA%B3%BC-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC\" aria-label=\"상호작용 성능과 리액트 컴파일러 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상호작용 성능과 리액트 컴파일러</h2>\n<h3 id=\"첫-페이지-측정하기\" style=\"position:relative;\"><a href=\"#%EC%B2%AB-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%B8%A1%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"첫 페이지 측정하기 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫 페이지 측정하기</h3>\n<p>상호작용 성능을 측정하기 위해 ‘컴포넌트’ 페이지부터 시작했습니다. 이 페이지에서는 제가 작업 중인 UI 컴포넌트 라이브러리의 리액트 컴포넌트 미리보기를 보여주고 있습니다. 미리보기는 버튼부터 전체 페이지까지 무엇이든 될 수 있습니다. 저는 ‘설정’ 페이지의 미리 보기를 측정했습니다.</p>\n<p>미리보기 페이지에는 ‘라이트’ 및 ‘다크’ 모드 토글이 있습니다. 아래에서 볼 수 있듯이 모드를 전환하면 미리보기가 다시 렌더링되며 녹색 선이 이를 나타냅니다.</p>\n<p><img src=\"/b9ee9e22022806df5a3bc1f55735baf1/13.gif\" alt=\"components-preview-re-renders.gif\"></p>\n<p>컴파일러를 사용하기 전과 후의 상호 작용 성능은 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08808a0cc449650c32309d8283b2341e/5f652/14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.71428571428571%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVQoz3WSTUsbURSGJzNJRJLJdyYppQtb664LN4Ixi4BaSAhmEQKiBAN2peDGfrmwdAxmJjZxUaj+iP6QLFrpHwilrXYhLSYhommrPOVe66CLHjjcj/Pec9573qPEYjGER6NRgsEggUCAUCiEruvyHI/HZVys1/Frj0WjhKNxRh7cJfIPpxiGIYG5XI5sNsvMzAyZTIZ0Os34+DiRSASBEUXE3fz8PNPT00xOpkjEIsw+nqXx/hOlhTK634ciKotHhbk5VldXqVQqlEolyuUyxWJRFhMJw+EwhUKBpaUllpeXWVhcxIgEyRQrvP1wQe7JC3Tf8BVDn8+HqqqoLheKosi9WN1u960vu27Exd6lKGjDAYzRR8TvjcoWKKIXgt2bHYtXZhWzWmVra4tGo8Ha2ppkL5IlDINnL5/T3N3FrtlYlkWz2aRuWzy8P0IoqMufKB6Ph/39PYQNjj7D+SnX1m63HWHuJJN8/X7IL/7QHXS4aVNTafx+nUQigTI0NIRl21xwSe/4mH6ny8nJiQS2Wi0phkiYTCb5eHDA+e8B3W6XXq9Hv9+n0+kwMTEhp8Jh+G7viuFh/4jTy/8z/HL0jTMG/Dz7cYthKpXC7/dfMRQ9zOfzWLUaG5sbbL7exDRNtmvbrKysOD0U1Z+ur2PtWJjbJrZtU6/XqVarjI2NySkQOEdloZpbc6OpmqOi1+t1VBbu8XpkXODkVKgqmqY5RcVg/wWCE4iJK5SAegAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"settings-page-re-renders-performance.png\"\n        title=\"settings-page-re-renders-performance.png\"\n        src=\"/static/08808a0cc449650c32309d8283b2341e/8c557/14.png\"\n        srcset=\"/static/08808a0cc449650c32309d8283b2341e/4edbd/14.png 175w,\n/static/08808a0cc449650c32309d8283b2341e/13ae7/14.png 350w,\n/static/08808a0cc449650c32309d8283b2341e/8c557/14.png 700w,\n/static/08808a0cc449650c32309d8283b2341e/e996b/14.png 1050w,\n/static/08808a0cc449650c32309d8283b2341e/5f652/14.png 1302w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>컴파일러를 활성화하면 총 blocking 시간이 280ms에서 말 그대로 0으로 감소했습니다!</p>\n<p>이것은 매우 인상적입니다. 하지만 궁금한 점도 생겼습니다. 정확히 어떻게 이런 일이 발생했을까요? 제가 코드에서 무엇을 잘못했을까요?</p>\n<p>이 페이지의 코드는 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Preview</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> renderCode <span class=\"token operator\">=</span> <span class=\"token function\">useRenderCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> darkMode <span class=\"token operator\">=</span> <span class=\"token function\">useDarkMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n      <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>\n        darkMode <span class=\"token operator\">===</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'dark bg-buGray900'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'bg-buGray25'</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LiveProvider</span></span> <span class=\"token attr-name\">code</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderCode<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">language</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>tsx<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LivePreview</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LiveProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">LiveProvider</code> 블록은 문자열로 전달된 전체 “설정” 컴포넌트를 렌더링하는 부분입니다. 이는 처음에 다뤘던 간단한 예제 중 하나와 매우 유사합니다. 몇 개의 프로퍼티를 가진 매우 느린 컴포넌트(<code class=\"language-text\">LiveProvider</code>)입니다.</p>\n<p>컴파일러가 이를 감지한 것은 매우 흥미로웠습니다. 하지만 약간 속임수 같기도 했습니다. 😅 더 일반적인 시나리오는 크고 작은 컴포넌트들이 여기저기에 존재하는 경우일 것입니다. 그래서 좀 더 현실적인 페이지를 측정해 보았습니다.</p>\n<h3 id=\"두-번째-페이지-측정\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B2%88%EC%A7%B8-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%B8%A1%EC%A0%95\" aria-label=\"두 번째 페이지 측정 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 번째 페이지 측정</h3>\n<p>다음 페이지에서는 헤더, 푸터, 그리고 그 사이에 카드 목록이 있습니다. 헤더에는 버튼, 입력 필드, 체크박스와 같은 몇 개의 “빠른 필터”가 있습니다. 버튼을 선택하면 버튼이 포함된 모든 카드 목록이 나타납니다. 체크박스를 활성화하면 체크박스가 포함된 카드가 목록에 추가됩니다.</p>\n<p>메모이제이션하지 않으면 매우 긴 카드 목록을 포함한 전체 페이지가 다시 렌더링됩니다.</p>\n<p><img src=\"/c43db8b3186d6ed87cfb9cfdabf25dc8/15.gif\" alt=\"checkbox-re-renders-before-compiler.gif\"></p>\n<p>체크박스 카드를 기존 목록에 추가하는 동작의 성능은 컴파일러 활성화 전후 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d9e3d19902de5c6ffc18aebfc2e65fa7/5f652/16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.71428571428571%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXElEQVQoz0VTS09aQRi9PBq1PAXulRBrg7bhZbqgF7igibKRlS59EhQCadxJ4qLxP3TVxw5Eok1c9Bc0af9Du7EbUyoqV6DAlUfE0tPM16iTTL6ZL+c758x8M5zNZoMgCBgdHYVer4fJZKKo0+kox/M8GIZNi8VC0Ww2Y2RkhPZWqxW+QAji3BysvB2c0WjE5uYmtre3kUqlkEwmEYvFsLy8DJfLRcVMkAmtrq4inU4jk8kgvrGB5y4Pnj2x4M3RVxS+/EJI8oNjKvPReaytrWF9fZ2IlpaWKHo8HiLkBZ6cLCwskNjKygoJT01NQnCM49WHz3j96QecL0Lg2LEeabVQqVTgOA4qtQpqtZrWBoOB3N0dWavRQqPR0GT4oaEhPNbpYRTGYbI/hU2wg4tGoyh+PEQ+l8d+bh+5XA75fB7Hx8dYXFwkUuZu0unE2/fvcHh0hIP9AxQKBRSLRYrTXjfMRgMEngeXSafBRq1bQ0W5xAAD3I29vT0MDw/T5U/7fKi3W+jiBjWlitvB7T1udnaWGjk2NgYukUhQstqqQm7JaHfb6HQ6lMtms9RN5tDt8aB8VsZ1X8F56xy9fg+DPwPChsNhImTXwyW3tvAXgFyXcfX7Co1mA81mkwh3d3fvn4fP60WpUkbrpg25WkG9UYeiKOj3+4hEIg8O4/E4FZ/Kpzi5PEHjuoFO+7/DnZ2dB4duN0o/S5AVGd/PvuGifoFet0ekkiQ9OJyYmIAoigiKQUgBCeJLEX6/H4FAAE6nk8hYh+12O+UjUgQz4RmEQ2EEg0HCORwOwrFP8A9c/a2guqqBuwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"checkbox-re-renders-performance.png\"\n        title=\"checkbox-re-renders-performance.png\"\n        src=\"/static/d9e3d19902de5c6ffc18aebfc2e65fa7/8c557/16.png\"\n        srcset=\"/static/d9e3d19902de5c6ffc18aebfc2e65fa7/4edbd/16.png 175w,\n/static/d9e3d19902de5c6ffc18aebfc2e65fa7/13ae7/16.png 350w,\n/static/d9e3d19902de5c6ffc18aebfc2e65fa7/8c557/16.png 700w,\n/static/d9e3d19902de5c6ffc18aebfc2e65fa7/e996b/16.png 1050w,\n/static/d9e3d19902de5c6ffc18aebfc2e65fa7/5f652/16.png 1302w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>blocking 시간이 130ms에서 90ms로 감소했습니다. 여전히 꽤 괜찮고, 훨씬 더 현실적입니다! 하지만 해당 페이지의 모든 리렌더링이 제거되었다면, 수치는 훨씬 더 많이 감소할 것으로 예상했습니다. 기존 목록에 몇 개의 카드만 추가하는 것은 거의 즉각적으로 이루어져야 합니다.</p>\n<p>여기서 다시 렌더링이 발생하는 상황을 확인했는데, 안타깝게도 그렇습니다. 대부분의 리렌더링은 제거되었지만, 페이지에서 가장 무거운 카드 자체는 여전히 리렌더링됩니다.</p>\n<p><img src=\"/91627aeed52c585b893b7704c2313228/17.gif\" alt=\"checkbox-re-renders-after-compiler.gif\"></p>\n<p>코드를 다시 확인해봤는데, 정말 미스터리 합니다. 왜냐하면 이 코드는 리액트에서 가장 표준적인 코드이기 때문입니다. 데이터 배열을 map으로 순회하고, 내부에 <code class=\"language-text\">GalleryCard</code> 아이템을 렌더링하는 식이죠.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">?.</span>data<span class=\"token operator\">?.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>example<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GalleryCard</span></span>\n        <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/examples/code-examples/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>example<span class=\"token punctuation\">.</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">preview</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>previewUrl<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>컴파일러 문제를 디버깅할 때 가장 먼저 하는 일은 고전적인 도구로 메모이제이션을 다시 구현하는 것입니다. 이번 경우에는 카드 컴포넌트를 React.memo로 감싸는 것만으로 충분합니다. 만약 코드가 괜찮다면, 기존 카드들은 리렌더링을 멈출 것이며, 이는 컴파일러가 이 컴포넌트를 어떤 이유로 건너뛰었다는 것을 의미합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 이전 어딘가에서</span>\n<span class=\"token keyword\">const</span> GalleryCardMemo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>GalleryCardMemo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// render 함수 어딘가에서</span>\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">?.</span>data<span class=\"token operator\">?.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>example<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GalleryCardMemo</span></span>\n        <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/examples/code-examples/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>example<span class=\"token punctuation\">.</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">preview</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>previewUrl<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>하지만, 그런 일은 일어나지 않았습니다.</p>\n<p>이는 컴파일러의 문제가 아니라, 코드 자체에 심각한 문제가 있다는 것을 의미합니다.</p>\n<p>우리가 이미 알고 있듯이, 메모이제이션된 컴포넌트에서 단 하나의 프로퍼티라도 변경되면 메모이제이션은 작동하지 않고, 리렌더링이 발생합니다. 그러므로 프로퍼티에 문제가 있을 것입니다. 좀 더 자세히 살펴보니, 프로퍼티 대부분은 원시 문자열이었지만 <code class=\"language-text\">example.previewUrl</code>만 예외였습니다. 이것은 객체였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  light: \"/public/light/...\",\n  dark: \"/public/dark/...\",\n};</code></pre></div>\n<p>그러면 객체는 다시 렌더링할 때마다 참조를 변경하고 있습니다. 어떻게 된 일 일까요? 이 데이터는 <a href=\"https://tanstack.com/query/latest\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">리액트쿼리 라이브러리</a>를 사용해 REST 엔드포인트를 쿼리하여 가져오는 <code class=\"language-text\">data</code> 변수에서 가져왔습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  queryKey<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'examples'</span><span class=\"token punctuation\">,</span> elements<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/examples?elements=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>elements<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> json<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>리액트쿼리는 <code class=\"language-text\">queryKey</code>에 제공된 키를 기준으로 <code class=\"language-text\">queryFn</code>에서 반환된 데이터를 캐시합니다. 제 경우에는 선택된 요소에 따라 <code class=\"language-text\">elements</code> 배열을 결합해 키를 변경하고 있었습니다. 따라서 버튼만 선택되면 키는 <code class=\"language-text\">button</code>이 되고, 체크박스가 목록에 추가되면 키는 <code class=\"language-text\">button,checkbox</code>로 바뀝니다.</p>\n<p>리액트쿼리가 이 두 키와 해당 키에 대해 반환된 데이터를 완전히 다른 데이터 배열로 간주한다는 것입니다. 이 부분은 이해가 됩니다. 저는 그것들이 동일한 배열이며 단순히 업데이트될 수 있다고 명시하지 않았으니까요.</p>\n<p>제가 의심하는 바는, 키가 <code class=\"language-text\">button</code>에서 <code class=\"language-text\">button,checkbox</code>로 변경될 때, 쿼리 라이브러리가 새로운 데이터를 가져와 완전히 새로운 배열로 반환하고, 내부의 모든 객체는 완전히 새로운 참조를 갖는다는 것입니다. 그 결과, 메모이제이션된 <code class=\"language-text\">GalleryCard</code> 컴포넌트는 비원시 프로퍼티 중 하나에 대해 새로운 참조를 받게 되고, 메모이제이션은 작동하지 않으며, 데이터는 기술적으로 동일하지만 여전히 리렌더링됩니다.</p>\n<p>이를 확인하는 방법은 매우 간단합니다. 단순히 해당 객체를 원시 프로퍼티로 변환해 참조 변경을 제거하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">?.</span>data<span class=\"token operator\">?.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>example<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GalleryCardMemo</span></span>\n        <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/examples/code-examples/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>example<span class=\"token punctuation\">.</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span>\n        <span class=\"token comment\">// 전체 객체 대신 원시 값들을 전달</span>\n        <span class=\"token attr-name\">previewLight</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>previewUrl<span class=\"token punctuation\">.</span>light<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">previewDark</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">.</span>previewUrl<span class=\"token punctuation\">.</span>dark<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>실제로 이 작업을 수행한 후 모든 리렌더링이 완전히 중단되었습니다!</p>\n<p>마지막 단계는 변경 사항이 실제로 얼마나 영향을 미쳤는지 측정하는 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a10cf73802c8b90a805d1ddb199a62f/eee07/18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.42857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGUlEQVQozz2QT0zScRjGf0PWkP/w+0H4j4NsDlzE1qyJtsWcB13oJUlShrSB42BMD+lJ/AMlrvDgrIteWp26tVanPLVaR49e6qAHpkDpIpvJ+DS+mzzbu/d59rzvu/d9pfb2dtxuNy0tLTidTux2OzabDVmWcTgcuFwuOjo6hHZf83L9Rg+y1UxrWxtdXV2ixmqVGb4l43LakLxeL+l0mng8TjKZJJFIMDg4iFarxe/3k0qlWFxMM3p3mHh6k/T2R4waFaH748zPP2Y6kWAsPMG3twsEerqR9Ho9RqMRk9kk8mUoioLFbEGj0WCVZfQ6LVcUJw7PTRTFhsViQafTYTabUOx2PN4+Wq86ke6Fxsitr7OytMLy0jK5XI7Z2VkMegMjoyM8z+fJrGRYXc2w8WydO7f7aG5uJj6dIJ/fIJvJks1myeWe4On2IL1685o6CpUClzg8PESlUrG5tSV06azY8OYXFpAkic9fvwh9dvGn4dVfJW29fMEFVQrFAqVyiVqtxt7eHmq1mqdra9SA8q8Sp6enomnm0YwY+O7Deyr/zjguHlEul6lWqwQCAaTtnR1RePDzgMrfiuD7+/s0NTWJc+v4cfSdk98ngs/NzYmBn3Z3OeecUqXU2HBgYACpv7+fSCRCaDxEOBwWPBgMYjKZ8Pf2MjUVJfQgxMTkBLFYDJ/Ph8FgYGhoiNjDGJORSaLRqPA6Ozv5D9dqcXhG4H3MAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"final-summary.png\"\n        title=\"final-summary.png\"\n        src=\"/static/7a10cf73802c8b90a805d1ddb199a62f/8c557/18.png\"\n        srcset=\"/static/7a10cf73802c8b90a805d1ddb199a62f/4edbd/18.png 175w,\n/static/7a10cf73802c8b90a805d1ddb199a62f/13ae7/18.png 350w,\n/static/7a10cf73802c8b90a805d1ddb199a62f/8c557/18.png 700w,\n/static/7a10cf73802c8b90a805d1ddb199a62f/e996b/18.png 1050w,\n/static/7a10cf73802c8b90a805d1ddb199a62f/2cefc/18.png 1400w,\n/static/7a10cf73802c8b90a805d1ddb199a62f/eee07/18.png 1628w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>빵! 차단 시간이 0으로 떨어졌고, Interaction to Next Paint는 절반 이상 줄었습니다. 정말 🎤 드롭 상황이네요. 컴파일러는 성능을 약간 향상시켰지만, 저는 훨씬 더 잘 해냈습니다 ✌🏼 💪🏼</p>\n<p>이것이 두 번째로 자주 묻는 질문, “컴파일러가 상호작용 성능에 영향을 미칠 수 있나요?”에 대한 답변이 될 수 있다고 생각합니다. 답변은, “가능합니다.” 눈에 띄긴 하지만 페이지마다 다르며, 사람의 노력이 들어가면 더 좋은 효과를 만들 수 있습니다.</p>\n<h2 id=\"리액트-컴파일러가-모든-리렌더링을-잡아낼-수-있을까요\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC%EA%B0%80-%EB%AA%A8%EB%93%A0-%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81%EC%9D%84-%EC%9E%A1%EC%95%84%EB%82%BC-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C%EC%9A%94\" aria-label=\"리액트 컴파일러가 모든 리렌더링을 잡아낼 수 있을까요 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리액트 컴파일러가 모든 리렌더링을 잡아낼 수 있을까요?</h2>\n<p>이제 마지막 질문에 답할 시간입니다. 컴파일러가 정말 모든 것을 잡아낼 만큼 똑똑할까요? 우리는 이미 여기서 대답이 ‘아니오’라는 것을 알았습니다.</p>\n<p>하지만 조금 더 테스트하기 위해 앱에서 가장 눈에 띄는 리렌더 목록을 수집하고 컴파일러를 활성화한 후 얼마나 많은 리렌더링이 여전히 존재하는지 확인했습니다.</p>\n<p>9개의 눈에 띄는 리렌더링 사례를 확인했는데, 예를 들어 “탭이 변경될 때 전체 drawer가 리렌더링되는 경우”와 같은 상황들이 있었습니다. 9개의 사례의 결과는 다음과 같습니다.</p>\n<ul>\n<li><strong>두 경우는</strong> 모든 리렌더링이 100% 완벽하게 수정되었습니다.</li>\n<li><strong>두 경우는</strong> 단 하나도 수정되지 않았습니다.</li>\n<li>나머지는 위에서 조사한 경우처럼 중간 정도였습니다.</li>\n</ul>\n<p>그런데 아무것도 수정되지 않은 경우는 컴파일러가 이 줄 때문에 컴포넌트를 건너뛴 경우였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> filteredData <span class=\"token operator\">=</span> fuse<span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 줄 하나만으로요. <code class=\"language-text\">filteredData</code> 변수는 어디에서도 사용되지 않았습니다. <code class=\"language-text\">fuse</code>는 외부 퍼지 검색 라이브러리입니다. 따라서 이 동작의 가장 가능성 있는 이유는 라이브러리가 컴파일러와 호환되지 않는 무언가를 수행하고 있으며, 이는 제 통제 밖이라는 것입니다.</p>\n<p>결국, 컴파일러가 모든 리렌더링을 잡을 수 있는지에 대한 답은 명확합니다. 절대 아닙니다. 항상 컴파일러 자체 또는 메모이제이션 규칙과 호환되지 않는 외부 의존성이 있을 것입니다.</p>\n<p>또는 컴파일러가 처리 방법을 모르는 이상한 레거시 코드가 있을 수도 있습니다.</p>\n<p>아니면, 제가 가지고 있었던 것처럼 <em>잘못된</em> 것은 아니지만 메모이제이션에 최적화되지 않은 코드일 수 있습니다.</p>\n<h2 id=\"간단-요약\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8-%EC%9A%94%EC%95%BD\" aria-label=\"간단 요약 permalink\" class=\"heading-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단 요약</h2>\n<p>조사의 결과와 결론을 빠르게 요약해 보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c295cd0cf26f98244a3aaeba03149476/f868f/19.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.42857142857144%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABwklEQVQoz3VSSW4aQRStXSLZ9EBX9WBiYRDNJKDBQIsxhEEIHNg58TqLLC1ZPoFX3uQI2WaZC/gIPkJO86JXogiylMXTH6rq1X//f1EsFpGmKZIkQavVQrvdRr1eR7PZRK/XQ6PR0HmiUqnA8zwopTR8X8E+dzG76+DHywPGn68hyuUyFosF5vM5BoMBttstJpMJ1us1ZrMZptMplsulvsPzbDZ7Qugjc2bj5ttH/Hx9QnpTh+AF27bhOA5c19W+sW/BPImklAdSefAlVOBBKglBCeaBZVlHnx+c2v+RSk8iugxwVbtAlAshqtWqlkSZq9XqKJ19ZUzZ4/FYW4L3jWw/8GGdOdh+H+LXn2fMb1OIfD6Pbrer0e/30el09IA4EMZmUDxnrlQqHQfDoVjnNpZfBnj+fY/kU/yvh5R7Ktnk3ko21VGyke24Lt5nMvCyEoJJ9oW/EvT5iGBsfMKcHYdyII2UQhKG8JWC4J5xVUajEYbDITabDXa7nfbZQ1r2l/n9fq9z3FMSh76Pd66Lu7gEfL3F6PIDRC6X040uFAoatVoNcRyDC89+EYy51CSiH4ahrowVOVKiEUV4rJRxFQT4C6uAHoL3KhFUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"19\"\n        title=\"19\"\n        src=\"/static/c295cd0cf26f98244a3aaeba03149476/8c557/19.png\"\n        srcset=\"/static/c295cd0cf26f98244a3aaeba03149476/4edbd/19.png 175w,\n/static/c295cd0cf26f98244a3aaeba03149476/13ae7/19.png 350w,\n/static/c295cd0cf26f98244a3aaeba03149476/8c557/19.png 700w,\n/static/c295cd0cf26f98244a3aaeba03149476/e996b/19.png 1050w,\n/static/c295cd0cf26f98244a3aaeba03149476/f868f/19.png 1382w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><strong>초기 로드 성능</strong> - 부정적인 영향은 없었습니다.</li>\n<li><strong>인터랙션 성능</strong> - 일부는 많이, 일부는 약간 개선되었습니다.</li>\n<li><strong>모든 리렌더를 포착할 수 있나요?</strong> - 아니요, 앞으로도 그럴 일은 없을 것입니다.</li>\n</ul>\n<p>“곧 메모이제이션을 안 쓰게 될까요?”라는 질문에 대한 대답은 “아니오”인가요? 꼭 그렇지는 않습니다! 상황에 따라 다릅니다.</p>\n<p>앱의 성능이 세상에서 가장 중요한 것이 아니거나, “그럭저럭 괜찮다, 더 나아질 수 있지만 신경 쓰기 귀찮다”는 수준이라면, 컴파일러를 활성화하는 것만으로도 약간 나아지거나 저비용으로 충분히 괜찮아질 것입니다. “충분히 괜찮다”의 정의는 여러분에게 달려 있습니다. 하지만 대부분의 경우 컴파일러를 켜고 메모이제이션을 잊어도 괜찮을 것이라고 생각합니다.</p>\n<p>하지만! “충분히 괜찮다”에 만족할 수 없고, 앱에서 <strong>1밀리초라도</strong> 더 쥐어짜야 한다면, 다시 수동 메모이제이션의 세계로 돌아오셔야 합니다.</p>\n<p>여러분에게는 “아니요”라는 답이 나올 것입니다. 죄송합니다. 지금 알아야 하는 모든 것에 더해, 컴파일러가 무엇을 하고 있는지, 어떻게 작동하는지까지 알아야 합니다. 그러니 일이 조금 더 복잡해질 것입니다.</p>\n<p>하지만 이 모든 것을 실제로 알아야 할 필요성을 느끼는 사람은 거의 없을 것이라고 생각합니다.</p>\n<p>그리고 만약 여러분이 그런 사람이 되고 싶다면, 저는 이 주제에 대한 <a href=\"https://www.developerway.com/tags/performance\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">많은 글</a>을 썼고, <a href=\"https://www.youtube.com/playlist?list=PL6dw1BPCcLC4n-4o-t1kQZH0NJeZtpmGp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">유튜브 영상</a>도 많이 올렸으며, 리렌더링과 이를 제거하는 방법에 절반을 할애한 <a href=\"https://advanced-react.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">책</a>도 썼습니다. 한번 확인해보세요 😉</p>\n<blockquote>\n<p>🚀 한국어로 된 프런트엔드 아티클을 빠르게 받아보고 싶다면 <a href=\"https://kofearticle.substack.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Korean FE Article</a>을 구독해주세요!</p>\n</blockquote>","fields":{"slug":"/react-compiler-performs-on-real-code/"},"frontmatter":{"title":"(번역) 실제 코드에서 리액트 컴파일러의 성능","date":"2025-01-11","lastUpdated":"2025-01-11","description":null,"tags":["React","번역"]}},"previous":{"fields":{"slug":"/git-repo-size/"},"frontmatter":{"title":"(번역) 자바스크립트 모노레포의 깃 용량을 94% 줄인 방법"}},"next":{"fields":{"slug":"/reacts-experimental-view-transition-api/"},"frontmatter":{"title":"(번역) 리액트의 실험적인 애니메이션 API 공개"}}},"pageContext":{"id":"c46c6043-3c5a-5ddb-b947-1a4bb1f01349","previousPostId":"7aac2848-b9a5-570d-a6ac-71ebd45f1906","nextPostId":"80e8e8f8-d7c7-5007-bc36-847653ed7c2a","ogImage":"public/og-image/react-compiler-performs-on-real-code/index.png"}},"staticQueryHashes":["2260143708","984448874"]}